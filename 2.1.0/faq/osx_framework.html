<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Working with Matplotlib on OSX &mdash; Matplotlib 2.1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/mpl.css"
type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css"
type="text/css" />
    <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib 2.1.0 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html"
/>
    <link rel="search" title="Search" href="../search.html"
/>
    <link rel="top" title="Matplotlib 2.1.0 documentation" href="../index.html" />
    <link rel="up" title="The Matplotlib FAQ" href="index.html" />
    <link rel="next" title="Toolkits" href="../mpl_toolkits/index.html" />
    <link rel="prev" title="Working with Matplotlib in Virtual environments" href="virtualenv_faq.html" /> 


    <link rel="canonical" href="https://matplotlib.org/3.1.0/faq/osx_framework.html" />
  </head>
  <body>
<div id="unreleased-message"> You are reading an old version of the documentation (v2.1.0).  For the latest version see <a href="/stable/">https://matplotlib.org/stable/</a> </div>


<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px; position: relative;">
<a href="../index.html"><img src="../_static/logo2.svg" width="540px" border="0" alt="matplotlib"/></a>

<!-- The "Fork me on github" ribbon -->
<div id="forkongithub"><a href="https://github.com/matplotlib/matplotlib">Fork me on GitHub</a></div>
</div>




    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../mpl_toolkits/index.html" title="Toolkits"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="virtualenv_faq.html" title="Working with Matplotlib in Virtual environments"
             accesskey="P">previous</a> |</li>

        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../gallery/index.html">examples</a>|&nbsp;</li>
        <li><a href="../tutorials/index.html">tutorials</a>|&nbsp;</li>
        <li><a href="../api/pyplot_summary.html">pyplot</a>|&nbsp;</li>
        <li><a href="../contents.html">docs</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">The Matplotlib FAQ</a> &raquo;</li> 
      </ul>
    </div>

  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><a href="https://www.numfocus.org">
  <image src="https://img.shields.io/badge/powered%20by-NumFOCUS-orange.svg?style=flat&amp;colorA=E1523D&amp;colorB=007D8A">
</a>

<br/>

<a href="http://depsy.org/package/python/matplotlib">
  <img src="../_static/depsy_badge.svg">
</a>

<br/>

Travis-CI: <a href="https://travis-ci.org/matplotlib/matplotlib">
  <img src="https://travis-ci.org/matplotlib/matplotlib.svg?branch=master"/>
</a>
<br/>
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Working with Matplotlib on OSX</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#short-version">Short version</a><ul>
<li><a class="reference internal" href="#virtualenv">VirtualEnv</a></li>
<li><a class="reference internal" href="#pyenv">Pyenv</a></li>
<li><a class="reference internal" href="#conda">Conda</a></li>
</ul>
</li>
<li><a class="reference internal" href="#long-version">Long version</a><ul>
<li><a class="reference internal" href="#pythonhome-function"><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> Function</a><ul>
<li><a class="reference internal" href="#pythonhome-and-jupyter"><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> and Jupyter</a></li>
<li><a class="reference internal" href="#pythonhome-script"><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> Script</a></li>
<li><a class="reference internal" href="#pythonw-compiler">PythonW Compiler</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../contents.html">Documentation overview</a><ul>
  <li><a href="index.html">The Matplotlib FAQ</a><ul>
      <li>Previous: <a href="virtualenv_faq.html" title="previous chapter">Working with Matplotlib in Virtual environments</a></li>
      <li>Next: <a href="../mpl_toolkits/index.html" title="next chapter">Toolkits</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/faq/osx_framework.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="working-with-matplotlib-on-osx">
<span id="osxframework-faq"></span><h1>Working with Matplotlib on OSX<a class="headerlink" href="#working-with-matplotlib-on-osx" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#working-with-matplotlib-on-osx" id="id2">Working with Matplotlib on OSX</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#short-version" id="id4">Short version</a><ul>
<li><a class="reference internal" href="#virtualenv" id="id5">VirtualEnv</a></li>
<li><a class="reference internal" href="#pyenv" id="id6">Pyenv</a></li>
<li><a class="reference internal" href="#conda" id="id7">Conda</a></li>
</ul>
</li>
<li><a class="reference internal" href="#long-version" id="id8">Long version</a><ul>
<li><a class="reference internal" href="#pythonhome-function" id="id9"><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> Function</a><ul>
<li><a class="reference internal" href="#pythonhome-and-jupyter" id="id10"><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> and Jupyter</a></li>
<li><a class="reference internal" href="#pythonhome-script" id="id11"><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> Script</a></li>
<li><a class="reference internal" href="#pythonw-compiler" id="id12">PythonW Compiler</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<span id="osxframework-introduction"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>On OSX, two different types of Python Builds exist: a regular build and a
framework build. In order to interact correctly with OSX through the native
GUI frameworks you need a framework build of Python.
At the time of writing the <code class="docutils literal"><span class="pre">macosx</span></code> and <code class="docutils literal"><span class="pre">WXAgg</span></code> backends require a
framework build to function correctly. This can result in issues for
a python installation not build as a framework and may also happen in
virtual envs and when using (Ana)Conda.
From Matplotlib 1.5 onwards the <code class="docutils literal"><span class="pre">macosx</span></code> backend
checks that a framework build is available and fails if a non framework
build is found. WX has a similar check build in.</p>
<p>Without this check a partially functional figure is created.
Among the issues with it is that it is produced in the background and
cannot be put in front of any other window. Several solutions and work
arounds exist see below.</p>
</div>
<div class="section" id="short-version">
<h2>Short version<a class="headerlink" href="#short-version" title="Permalink to this headline">¶</a></h2>
<div class="section" id="virtualenv">
<h3>VirtualEnv<a class="headerlink" href="#virtualenv" title="Permalink to this headline">¶</a></h3>
<p>If you are on Python 3, use
<a class="reference external" href="https://docs.python.org/3/library/venv.html">venv</a>
instead of <a class="reference external" href="https://virtualenv.pypa.io/en/latest/">virtualenv</a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="n">my</span><span class="o">-</span><span class="n">virtualenv</span>
<span class="n">source</span> <span class="n">my</span><span class="o">-</span><span class="n">virtualenv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>Otherwise you will need one of the workarounds below.</p>
</div>
<div class="section" id="pyenv">
<h3>Pyenv<a class="headerlink" href="#pyenv" title="Permalink to this headline">¶</a></h3>
<p>If you are using pyenv and virtualenv you can enable your python version to be installed as a framework:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">PYTHON_CONFIGURE_OPTS</span><span class="o">=</span><span class="s2">&quot;--enable-framework&quot;</span> <span class="n">pyenv</span> <span class="n">install</span> <span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span>
</pre></div>
</div>
</div>
<div class="section" id="conda">
<h3>Conda<a class="headerlink" href="#conda" title="Permalink to this headline">¶</a></h3>
<p>The default python provided in (Ana)Conda is not a framework
build. However, the Conda developers have made it easy to install
a framework build in both the main environment and in Conda envs.
To use this install python.app <code class="docutils literal"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">python.app</span></code> and
use <code class="docutils literal"><span class="pre">pythonw</span></code> rather than <code class="docutils literal"><span class="pre">python</span></code></p>
</div>
</div>
<div class="section" id="long-version">
<h2>Long version<a class="headerlink" href="#long-version" title="Permalink to this headline">¶</a></h2>
<p>Unfortunately virtualenv creates a non
framework build even if created from a framework build of Python.
As documented above you can use venv as an alternative on Python 3.</p>
<p>The issue has been reported on the virtualenv bug tracker <a class="reference external" href="https://github.com/pypa/virtualenv/issues/54">here</a> and <a class="reference external" href="https://github.com/pypa/virtualenv/issues/609">here</a></p>
<p>Until this is fixed, one of the following workarounds can be used:</p>
<div class="section" id="pythonhome-function">
<h3><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> Function<a class="headerlink" href="#pythonhome-function" title="Permalink to this headline">¶</a></h3>
<p>The best known work around is to use the non
virtualenv python along with the PYTHONHOME environment variable.
This can be done by defining a function in your <code class="docutils literal"><span class="pre">.bashrc</span></code> using</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>function frameworkpython {
    if [[ ! -z &quot;$VIRTUAL_ENV&quot; ]]; then
        PYTHONHOME=$VIRTUAL_ENV /usr/local/bin/python &quot;$@&quot;
    else
        /usr/local/bin/python &quot;$@&quot;
    fi
}
</pre></div>
</div>
<p>This function can then be used in all of your virtualenvs without having to
fix every single one of them.</p>
<p>With this in place you can run <code class="docutils literal"><span class="pre">frameworkpython</span></code> to get an interactive
framework build within the virtualenv. To run a script you can do
<code class="docutils literal"><span class="pre">frameworkpython</span> <span class="pre">test.py</span></code> where <code class="docutils literal"><span class="pre">test.py</span></code> is a script that requires a
framework build. To run an interactive <code class="docutils literal"><span class="pre">IPython</span></code> session with the framework
build within the virtual environment you can do <code class="docutils literal"><span class="pre">frameworkpython</span> <span class="pre">-m</span> <span class="pre">IPython</span></code></p>
<div class="section" id="pythonhome-and-jupyter">
<h4><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> and Jupyter<a class="headerlink" href="#pythonhome-and-jupyter" title="Permalink to this headline">¶</a></h4>
<p>This approach can be followed even if using <a class="reference external" href="https://jupyter.org/">Jupyter</a>
notebooks: you just need to setup a kernel with the suitable <code class="docutils literal"><span class="pre">PYTHONHOME</span></code>
definition. The  <a class="reference external" href="https://github.com/mapio/jupyter-virtualenv-osx">jupyter-virtualenv-osx</a>
script automates the creation of such a kernel.</p>
</div>
<div class="section" id="pythonhome-script">
<h4><code class="docutils literal"><span class="pre">PYTHONHOME</span></code> Script<a class="headerlink" href="#pythonhome-script" title="Permalink to this headline">¶</a></h4>
<p>An alternative work around borrowed from the <a class="reference external" href="https://wiki.wxpython.org/wxPythonVirtualenvOnMac">WX wiki</a>, is to use the non
virtualenv python along with the PYTHONHOME environment variable.  This can be
implemented in a script as below. To use this modify <code class="docutils literal"><span class="pre">PYVER</span></code> and
<code class="docutils literal"><span class="pre">PATHTOPYTHON</span></code> and put the script in the virtualenv bin directory i.e.
<code class="docutils literal"><span class="pre">PATHTOVENV/bin/frameworkpython</span></code></p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span>#!/bin/bash

# what real Python executable to use
PYVER=2.7
PATHTOPYTHON=/usr/local/bin/
PYTHON=${PATHTOPYTHON}python${PYVER}

# find the root of the virtualenv, it should be the parent of the dir this script is in
ENV=`$PYTHON -c &quot;import os; print(os.path.abspath(os.path.join(os.path.dirname(\&quot;$0\&quot;), &#39;..&#39;)))&quot;`

# now run Python with the virtualenv set as Python&#39;s HOME
export PYTHONHOME=$ENV
exec $PYTHON &quot;$@&quot;
</pre></div>
</div>
<p>With this in place you can run <code class="docutils literal"><span class="pre">frameworkpython</span></code> as above but will need to add this script
to every virtualenv</p>
</div>
<div class="section" id="pythonw-compiler">
<h4>PythonW Compiler<a class="headerlink" href="#pythonw-compiler" title="Permalink to this headline">¶</a></h4>
<p>In addition
<a class="reference external" href="https://github.com/gldnspud/virtualenv-pythonw-osx">virtualenv-pythonw-osx</a>
provides an alternative workaround which may be used to solve the issue.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the Matplotlib development team; 2012 - 2017 The Matplotlib development team.
      Last updated on Oct 13, 2017.
      Created using <a
href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55954603-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
<footer>
</footer>
</html>