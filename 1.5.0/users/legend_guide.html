<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Legend guide — Matplotlib 1.5.0 documentation</title>
<link href="../_static/mpl.css" rel="stylesheet" type="text/css"/>
<link href="../_static/pygments.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
<script src="../_static/jquery.js" type="text/javascript"></script>
<script src="../_static/underscore.js" type="text/javascript"></script>
<script src="../_static/doctools.js" type="text/javascript"></script>
<link href="../_static/opensearch.xml" rel="search" title="Search within Matplotlib 1.5.0 documentation" type="application/opensearchdescription+xml"/>
<link href="../index.html" rel="top" title="Matplotlib 1.5.0 documentation"/>
<link href="beginner.html" rel="up" title="Beginner’s Guide"/>
<link href="annotations_guide.html" rel="next" title="Annotating Axes"/>
<link href="image_tutorial.html" rel="prev" title="Image tutorial"/>
<link href="http://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css"/>
<link href="https://matplotlib.org/users/legend_guide.html" rel="canonical"/></head>
<body><div id="old-version-banner">
            You are reading documentation for a static version of Matplotlib.
            <a href="https://matplotlib.org/users/legend_guide.html">This page may have been updated.</a>
</div>
<div class="alert" style="background-color: #FEA46C; padding: 10px 0;
">
<h3>We're updating the default styles for Matplotlib 2.0</h3>
<p>Learn what to expect in the <a href="/style_changes.html" style="font-weight: bold;
color: #11557C;">new updates</a></p>
</div>
<link href="/_static/favicon.ico" rel="shortcut icon"/>
<!-- The "Fork me on github" ribbon -->
<img src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" style="float: right; margin-bottom: -40px; top: 0; right: 0; border: 0;" usemap="#ribbonmap"/>
<map name="ribbonmap">
<area coords="15,0,148,-1,148,135" href="https://github.com/matplotlib/matplotlib" shape="poly" title="Fork me on GitHub"/>
</map>
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../index.html"><img alt="matplotlib" border="0" src="../_static/logo2.png"/></a>
</div>
<div class="related">
<h3>Navigation</h3>
<ul>
<li class="right" style="margin-right: 10px">
<a accesskey="I" href="../genindex.html" title="General Index">index</a></li>
<li class="right">
<a href="../py-modindex.html" title="Python Module Index">modules</a> |</li>
<li class="right">
<a accesskey="N" href="annotations_guide.html" title="Annotating Axes">next</a> |</li>
<li class="right">
<a accesskey="P" href="image_tutorial.html" title="Image tutorial">previous</a> |</li>
<li><a href="../index.html">home</a>| </li>
<li><a href="../examples/index.html">examples</a>| </li>
<li><a href="../gallery.html">gallery</a>| </li>
<li><a href="../api/pyplot_summary.html">pyplot</a>| </li>
<li><a href="../contents.html">docs</a> »</li>
<li><a href="index.html">User’s Guide</a> »</li>
<li><a accesskey="U" href="beginner.html">Beginner’s Guide</a> »</li>
</ul>
</div>
<div class="sphinxsidebar">
<div class="sphinxsidebarwrapper">
<h3><a href="../contents.html">Table Of Contents</a></h3>
<ul>
<li><a class="reference internal" href="#">Legend guide</a><ul>
<li><a class="reference internal" href="#controlling-the-legend-entries">Controlling the legend entries</a></li>
<li><a class="reference internal" href="#creating-artists-specifically-for-adding-to-the-legend-aka-proxy-artists">Creating artists specifically for adding to the legend (aka. Proxy artists)</a></li>
<li><a class="reference internal" href="#legend-location">Legend location</a></li>
<li><a class="reference internal" href="#multiple-legends-on-the-same-axes">Multiple legends on the same Axes</a></li>
<li><a class="reference internal" href="#legend-handlers">Legend Handlers</a><ul>
<li><a class="reference internal" href="#implementing-a-custom-legend-handler">Implementing a custom legend handler</a></li>
</ul>
</li>
<li><a class="reference internal" href="#known-examples-of-using-legend">Known examples of using legend</a></li>
</ul>
</li>
</ul>
<h4>Previous topic</h4>
<p class="topless"><a href="image_tutorial.html" title="previous chapter">Image tutorial</a></p>
<h4>Next topic</h4>
<p class="topless"><a href="annotations_guide.html" title="next chapter">Annotating Axes</a></p>
<div aria-label="source link" role="note">
<h3>This Page</h3>
<ul class="this-page-menu">
<li><a href="../_sources/users/legend_guide.txt" rel="nofollow">Show Source</a></li>
</ul>
</div>
<div id="searchbox" role="search" style="display: none">
<h3>Quick search</h3>
<form action="../search.html" class="search" method="get">
<input name="q" type="text"/>
<input type="submit" value="Go"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
<p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>
</div>
<div class="document">
<div class="documentwrapper">
<div class="bodywrapper">
<div class="body">
<div class="section" id="legend-guide">
<span id="plotting-guide-legend"></span><h1>Legend guide<a class="headerlink" href="#legend-guide" title="Permalink to this headline">¶</a></h1>
<p>This legend guide is an extension of the documentation available at
<a class="reference internal" href="../api/pyplot_api.html#matplotlib.pyplot.legend" title="matplotlib.pyplot.legend"><code class="xref py py-func docutils literal"><span class="pre">legend()</span></code></a> - please ensure you are familiar with
contents of that documentation before proceeding with this guide.</p>
<p>This guide makes use of some common terms, which are documented here for clarity:</p>
<dl class="glossary docutils">
<dt id="term-legend-entry">legend entry</dt>
<dd>A legend is made up of one or more legend entries. An entry is made up of
exactly one key and one label.</dd>
<dt id="term-legend-key">legend key</dt>
<dd>The colored/patterned marker to the left of each legend label.</dd>
<dt id="term-legend-label">legend label</dt>
<dd>The text which describes the handle represented by the key.</dd>
<dt id="term-legend-handle">legend handle</dt>
<dd>The original object which is used to generate an appropriate entry in
the legend.</dd>
</dl>
<div class="section" id="controlling-the-legend-entries">
<h2>Controlling the legend entries<a class="headerlink" href="#controlling-the-legend-entries" title="Permalink to this headline">¶</a></h2>
<p>Calling <a class="reference internal" href="../api/pyplot_api.html#matplotlib.pyplot.legend" title="matplotlib.pyplot.legend"><code class="xref py py-func docutils literal"><span class="pre">legend()</span></code></a> with no arguments automatically fetches the legend
handles and their associated labels. This functionality is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">handles</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../api/axes_api.html#matplotlib.axes.Axes.get_legend_handles_labels" title="matplotlib.axes.Axes.get_legend_handles_labels"><code class="xref py py-meth docutils literal"><span class="pre">get_legend_handles_labels()</span></code></a> function returns
a list of handles/artists which exist on the Axes which can be used to
generate entries for the resulting legend - it is worth noting however that
not all artists can be added to a legend, at which point a “proxy” will have
to be created (see <a class="reference internal" href="#proxy-legend-handles"><span>Creating artists specifically for adding to the legend (aka. Proxy artists)</span></a> for further details).</p>
<p>For full control of what is being added to the legend, it is common to pass
the appropriate handles directly to <a class="reference internal" href="../api/pyplot_api.html#matplotlib.pyplot.legend" title="matplotlib.pyplot.legend"><code class="xref py py-func docutils literal"><span class="pre">legend()</span></code></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">line_up</span><span class="p">,</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s">'Line 2'</span><span class="p">)</span>
<span class="n">line_down</span><span class="p">,</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s">'Line 1'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">line_up</span><span class="p">,</span> <span class="n">line_down</span><span class="p">])</span>
</pre></div>
</div>
<p>In some cases, it is not possible to set the label of the handle, so it is
possible to pass through the list of labels to <a class="reference internal" href="../api/pyplot_api.html#matplotlib.pyplot.legend" title="matplotlib.pyplot.legend"><code class="xref py py-func docutils literal"><span class="pre">legend()</span></code></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">line_up</span><span class="p">,</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s">'Line 2'</span><span class="p">)</span>
<span class="n">line_down</span><span class="p">,</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s">'Line 1'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="n">line_up</span><span class="p">,</span> <span class="n">line_down</span><span class="p">],</span> <span class="p">[</span><span class="s">'Line Up'</span><span class="p">,</span> <span class="s">'Line Down'</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-artists-specifically-for-adding-to-the-legend-aka-proxy-artists">
<span id="proxy-legend-handles"></span><h2>Creating artists specifically for adding to the legend (aka. Proxy artists)<a class="headerlink" href="#creating-artists-specifically-for-adding-to-the-legend-aka-proxy-artists" title="Permalink to this headline">¶</a></h2>
<p>Not all handles can be turned into legend entries automatically,
so it is often necessary to create an artist which <em>can</em>. Legend handles
don’t have to exists on the Figure or Axes in order to be used.</p>
<p>Suppose we wanted to create a legend which has an entry for some data which
is represented by a red color:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="kn">as</span> <span class="nn">mpatches</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">red_patch</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'The red data'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">red_patch</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/legend_guide-1.py">Source code</a>, <a class="reference external" href="../users/legend_guide-1.png">png</a>, <a class="reference external" href="../users/legend_guide-1.hires.png">hires.png</a>, <a class="reference external" href="../users/legend_guide-1.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/legend_guide-1.png" src="../_images/legend_guide-1.png"/>
</div>
<p>There are many supported legend handles, instead of creating a patch of color
we could have created a line with a marker:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.lines</span> <span class="kn">as</span> <span class="nn">mlines</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">blue_line</span> <span class="o">=</span> <span class="n">mlines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">([],</span> <span class="p">[],</span> <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s">'*'</span><span class="p">,</span>
                          <span class="n">markersize</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'Blue stars'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">blue_line</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/legend_guide-2.py">Source code</a>, <a class="reference external" href="../users/legend_guide-2.png">png</a>, <a class="reference external" href="../users/legend_guide-2.hires.png">hires.png</a>, <a class="reference external" href="../users/legend_guide-2.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/legend_guide-2.png" src="../_images/legend_guide-2.png"/>
</div>
</div>
<div class="section" id="legend-location">
<h2>Legend location<a class="headerlink" href="#legend-location" title="Permalink to this headline">¶</a></h2>
<p>The location of the legend can be specified by the keyword argument
<em>loc</em>. Please see the documentation at <a class="reference internal" href="../api/pyplot_api.html#matplotlib.pyplot.legend" title="matplotlib.pyplot.legend"><code class="xref py py-func docutils literal"><span class="pre">legend()</span></code></a> for more details.</p>
<p>The <code class="docutils literal"><span class="pre">bbox_to_anchor</span></code> keyword gives a great degree of control for manual
legend placement. For example, if you want your axes legend located at the
figure’s top right-hand corner instead of the axes’ corner, simply specify
the corner’s location, and the coordinate system of that location:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
           <span class="n">bbox_transform</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">transFigure</span><span class="p">)</span>
</pre></div>
</div>
<p>More examples of custom legend placement:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>


<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s">"test1"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s">"test2"</span><span class="p">)</span>
<span class="c"># Place a legend above this legend, expanding itself to</span>
<span class="c"># fully use the given bounding box.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.02</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="o">.</span><span class="mi">102</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
           <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">"expand"</span><span class="p">,</span> <span class="n">borderaxespad</span><span class="o">=</span><span class="mf">0.</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">223</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s">"test1"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s">"test2"</span><span class="p">)</span>
<span class="c"># Place a legend to the right of this smaller figure.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">borderaxespad</span><span class="o">=</span><span class="mf">0.</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/plotting/examples/simple_legend01.py">Source code</a>, <a class="reference external" href="../users/plotting/examples/simple_legend01.png">png</a>, <a class="reference external" href="../users/plotting/examples/simple_legend01.hires.png">hires.png</a>, <a class="reference external" href="../users/plotting/examples/simple_legend01.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/simple_legend01.png" src="../_images/simple_legend01.png"/>
</div>
</div>
<div class="section" id="multiple-legends-on-the-same-axes">
<h2>Multiple legends on the same Axes<a class="headerlink" href="#multiple-legends-on-the-same-axes" title="Permalink to this headline">¶</a></h2>
<p>Sometimes it is more clear to split legend entries across multiple
legends. Whilst the instinctive approach to doing this might be to call
the <a class="reference internal" href="../api/pyplot_api.html#matplotlib.pyplot.legend" title="matplotlib.pyplot.legend"><code class="xref py py-func docutils literal"><span class="pre">legend()</span></code></a> function multiple times, you will find that only one
legend ever exists on the Axes. This has been done so that it is possible
to call <a class="reference internal" href="../api/pyplot_api.html#matplotlib.pyplot.legend" title="matplotlib.pyplot.legend"><code class="xref py py-func docutils literal"><span class="pre">legend()</span></code></a> repeatedly to update the legend to the latest
handles on the Axes, so to persist old legend instances, we must add them
manually to the Axes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="n">line1</span><span class="p">,</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s">"Line 1"</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">)</span>
<span class="n">line2</span><span class="p">,</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s">"Line 2"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c"># Create a legend for the first line.</span>
<span class="n">first_legend</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">line1</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c"># Add the legend manually to the current Axes.</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">first_legend</span><span class="p">)</span>

<span class="c"># Create another legend for the second line.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">line2</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/plotting/examples/simple_legend02.py">Source code</a>, <a class="reference external" href="../users/plotting/examples/simple_legend02.png">png</a>, <a class="reference external" href="../users/plotting/examples/simple_legend02.hires.png">hires.png</a>, <a class="reference external" href="../users/plotting/examples/simple_legend02.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/simple_legend02.png" src="../_images/simple_legend02.png"/>
</div>
</div>
<div class="section" id="legend-handlers">
<h2>Legend Handlers<a class="headerlink" href="#legend-handlers" title="Permalink to this headline">¶</a></h2>
<p>In order to create legend entries, handles are given as an argument to an
appropriate <a class="reference internal" href="../api/legend_api.html#matplotlib.legend_handler.HandlerBase" title="matplotlib.legend_handler.HandlerBase"><code class="xref py py-class docutils literal"><span class="pre">HandlerBase</span></code></a> subclass.
The choice of handler subclass is determined by the following rules:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Update <a class="reference internal" href="../api/legend_api.html#matplotlib.legend.Legend.get_legend_handler_map" title="matplotlib.legend.Legend.get_legend_handler_map"><code class="xref py py-func docutils literal"><span class="pre">get_legend_handler_map()</span></code></a>
with the value in the <code class="docutils literal"><span class="pre">handler_map</span></code> keyword.</li>
<li>Check if the <code class="docutils literal"><span class="pre">handle</span></code> is in the newly created <code class="docutils literal"><span class="pre">handler_map</span></code>.</li>
<li>Check if the type of <code class="docutils literal"><span class="pre">handle</span></code> is in the newly created
<code class="docutils literal"><span class="pre">handler_map</span></code>.</li>
<li>Check if any of the types in the <code class="docutils literal"><span class="pre">handle</span></code>‘s mro is in the newly
created <code class="docutils literal"><span class="pre">handler_map</span></code>.</li>
</ol>
</div></blockquote>
<p>For completeness, this logic is mostly implemented in
<a class="reference internal" href="../api/legend_api.html#matplotlib.legend.Legend.get_legend_handler" title="matplotlib.legend.Legend.get_legend_handler"><code class="xref py py-func docutils literal"><span class="pre">get_legend_handler()</span></code></a>.</p>
<p>All of this flexibility means that we have the necessary hooks to implement
custom handlers for our own type of legend key.</p>
<p>The simplest example of using custom handlers is to instantiate one of the
existing <a class="reference internal" href="../api/legend_api.html#matplotlib.legend_handler.HandlerBase" title="matplotlib.legend_handler.HandlerBase"><code class="xref py py-class docutils literal"><span class="pre">HandlerBase</span></code></a> subclasses. For the
sake of simplicity, let’s choose <a class="reference internal" href="../api/legend_api.html#matplotlib.legend_handler.HandlerLine2D" title="matplotlib.legend_handler.HandlerLine2D"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.legend_handler.HandlerLine2D</span></code></a>
which accepts a <code class="docutils literal"><span class="pre">numpoints</span></code> argument (note numpoints is a keyword
on the <a class="reference internal" href="../api/pyplot_api.html#matplotlib.pyplot.legend" title="matplotlib.pyplot.legend"><code class="xref py py-func docutils literal"><span class="pre">legend()</span></code></a> function for convenience). We can then pass the mapping
of instance to Handler as a keyword to legend.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.legend_handler</span> <span class="kn">import</span> <span class="n">HandlerLine2D</span>

<span class="n">line1</span><span class="p">,</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="s">'o'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'Line 1'</span><span class="p">)</span>
<span class="n">line2</span><span class="p">,</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="s">'o'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">'Line 2'</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handler_map</span><span class="o">=</span><span class="p">{</span><span class="n">line1</span><span class="p">:</span> <span class="n">HandlerLine2D</span><span class="p">(</span><span class="n">numpoints</span><span class="o">=</span><span class="mi">4</span><span class="p">)})</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/legend_guide-3.py">Source code</a>, <a class="reference external" href="../users/legend_guide-3.png">png</a>, <a class="reference external" href="../users/legend_guide-3.hires.png">hires.png</a>, <a class="reference external" href="../users/legend_guide-3.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/legend_guide-3.png" src="../_images/legend_guide-3.png"/>
</div>
<p>As you can see, “Line 1” now has 4 marker points, where “Line 2” has 2 (the
default). Try the above code, only change the map’s key from <code class="docutils literal"><span class="pre">line1</span></code> to
<code class="docutils literal"><span class="pre">type(line1)</span></code>. Notice how now both <a class="reference internal" href="../api/lines_api.html#matplotlib.lines.Line2D" title="matplotlib.lines.Line2D"><code class="xref py py-class docutils literal"><span class="pre">Line2D</span></code></a> instances
get 4 markers.</p>
<p>Along with handlers for complex plot types such as errorbars, stem plots
and histograms, the default <code class="docutils literal"><span class="pre">handler_map</span></code> has a special <code class="docutils literal"><span class="pre">tuple</span></code> handler
(<a class="reference internal" href="../api/legend_api.html#matplotlib.legend_handler.HandlerTuple" title="matplotlib.legend_handler.HandlerTuple"><code class="xref py py-class docutils literal"><span class="pre">HandlerTuple</span></code></a>) which simply plots
the handles on top of one another for each item in the given tuple. The
following example demonstrates combining two legend keys on top of one another:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">randn</span>

<span class="n">z</span> <span class="o">=</span> <span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="n">red_dot</span><span class="p">,</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="s">"ro"</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="c"># Put a white cross over some of the data.</span>
<span class="n">white_cross</span><span class="p">,</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">z</span><span class="p">[:</span><span class="mi">5</span><span class="p">],</span> <span class="s">"w+"</span><span class="p">,</span> <span class="n">markeredgewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="n">red_dot</span><span class="p">,</span> <span class="p">(</span><span class="n">red_dot</span><span class="p">,</span> <span class="n">white_cross</span><span class="p">)],</span> <span class="p">[</span><span class="s">"Attr A"</span><span class="p">,</span> <span class="s">"Attr A+B"</span><span class="p">])</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/legend_guide-4.py">Source code</a>, <a class="reference external" href="../users/legend_guide-4.png">png</a>, <a class="reference external" href="../users/legend_guide-4.hires.png">hires.png</a>, <a class="reference external" href="../users/legend_guide-4.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/legend_guide-4.png" src="../_images/legend_guide-4.png"/>
</div>
<div class="section" id="implementing-a-custom-legend-handler">
<h3>Implementing a custom legend handler<a class="headerlink" href="#implementing-a-custom-legend-handler" title="Permalink to this headline">¶</a></h3>
<p>A custom handler can be implemented to turn any handle into a legend key (handles
don’t necessarily need to be matplotlib artists).
The handler must implement a “legend_artist” method which returns a
single artist for the legend to use. Signature details about the “legend_artist”
are documented at <a class="reference internal" href="../api/legend_api.html#matplotlib.legend_handler.HandlerBase.legend_artist" title="matplotlib.legend_handler.HandlerBase.legend_artist"><code class="xref py py-meth docutils literal"><span class="pre">legend_artist()</span></code></a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="kn">as</span> <span class="nn">mpatches</span>

<span class="k">class</span> <span class="nc">AnyObject</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">AnyObjectHandler</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">legend_artist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">legend</span><span class="p">,</span> <span class="n">orig_handle</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">,</span> <span class="n">handlebox</span><span class="p">):</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">handlebox</span><span class="o">.</span><span class="n">xdescent</span><span class="p">,</span> <span class="n">handlebox</span><span class="o">.</span><span class="n">ydescent</span>
        <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">handlebox</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">handlebox</span><span class="o">.</span><span class="n">height</span>
        <span class="n">patch</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">],</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s">'red'</span><span class="p">,</span>
                                   <span class="n">edgecolor</span><span class="o">=</span><span class="s">'black'</span><span class="p">,</span> <span class="n">hatch</span><span class="o">=</span><span class="s">'xx'</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                                   <span class="n">transform</span><span class="o">=</span><span class="n">handlebox</span><span class="o">.</span><span class="n">get_transform</span><span class="p">())</span>
        <span class="n">handlebox</span><span class="o">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">patch</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">patch</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="n">AnyObject</span><span class="p">()],</span> <span class="p">[</span><span class="s">'My first handler'</span><span class="p">],</span>
           <span class="n">handler_map</span><span class="o">=</span><span class="p">{</span><span class="n">AnyObject</span><span class="p">:</span> <span class="n">AnyObjectHandler</span><span class="p">()})</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/legend_guide-5.py">Source code</a>, <a class="reference external" href="../users/legend_guide-5.png">png</a>, <a class="reference external" href="../users/legend_guide-5.hires.png">hires.png</a>, <a class="reference external" href="../users/legend_guide-5.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/legend_guide-5.png" src="../_images/legend_guide-5.png"/>
</div>
<p>Alternatively, had we wanted to globally accept <code class="docutils literal"><span class="pre">AnyObject</span></code> instances without
needing to manually set the <code class="docutils literal"><span class="pre">handler_map</span></code> keyword all the time, we could have
registered the new handler with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">matplotlib.legend</span> <span class="kn">import</span> <span class="n">Legend</span>
<span class="n">Legend</span><span class="o">.</span><span class="n">update_default_handler_map</span><span class="p">({</span><span class="n">AnyObject</span><span class="p">:</span> <span class="n">AnyObjectHandler</span><span class="p">()})</span>
</pre></div>
</div>
<p>Whilst the power here is clear, remember that there are already many handlers
implemented and what you want to achieve may already be easily possible with
existing classes. For example, to produce elliptical legend keys, rather than
rectangular ones:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">matplotlib.legend_handler</span> <span class="kn">import</span> <span class="n">HandlerPatch</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="kn">as</span> <span class="nn">mpatches</span>


<span class="k">class</span> <span class="nc">HandlerEllipse</span><span class="p">(</span><span class="n">HandlerPatch</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">create_artists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">legend</span><span class="p">,</span> <span class="n">orig_handle</span><span class="p">,</span>
                       <span class="n">xdescent</span><span class="p">,</span> <span class="n">ydescent</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">,</span> <span class="n">trans</span><span class="p">):</span>
        <span class="n">center</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">width</span> <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">xdescent</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">height</span> <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">ydescent</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Ellipse</span><span class="p">(</span><span class="n">xy</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span> <span class="o">+</span> <span class="n">xdescent</span><span class="p">,</span>
                             <span class="n">height</span><span class="o">=</span><span class="n">height</span> <span class="o">+</span> <span class="n">ydescent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_prop</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">orig_handle</span><span class="p">,</span> <span class="n">legend</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="n">trans</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">p</span><span class="p">]</span>


<span class="n">c</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Circle</span><span class="p">((</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="mf">0.25</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s">"green"</span><span class="p">,</span>
                    <span class="n">edgecolor</span><span class="o">=</span><span class="s">"red"</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="n">c</span><span class="p">],</span> <span class="p">[</span><span class="s">"An ellipse, not a rectangle"</span><span class="p">],</span>
           <span class="n">handler_map</span><span class="o">=</span><span class="p">{</span><span class="n">mpatches</span><span class="o">.</span><span class="n">Circle</span><span class="p">:</span> <span class="n">HandlerEllipse</span><span class="p">()})</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/legend_guide-6.py">Source code</a>, <a class="reference external" href="../users/legend_guide-6.png">png</a>, <a class="reference external" href="../users/legend_guide-6.hires.png">hires.png</a>, <a class="reference external" href="../users/legend_guide-6.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/legend_guide-6.png" src="../_images/legend_guide-6.png"/>
</div>
</div>
</div>
<div class="section" id="known-examples-of-using-legend">
<h2>Known examples of using legend<a class="headerlink" href="#known-examples-of-using-legend" title="Permalink to this headline">¶</a></h2>
<p>Here is a non-exhaustive list of the examples available involving legend
being used in various ways:</p>
<ul class="simple">
<li><a class="reference internal" href="../examples/lines_bars_and_markers/scatter_with_legend.html#lines-bars-and-markers-scatter-with-legend"><span>lines_bars_and_markers example code: scatter_with_legend.py</span></a></li>
<li><a class="reference internal" href="../examples/api/legend_demo.html#api-legend-demo"><span>api example code: legend_demo.py</span></a></li>
<li><a class="reference internal" href="../examples/pylab_examples/contourf_hatching.html#pylab-examples-contourf-hatching"><span>pylab_examples example code: contourf_hatching.py</span></a></li>
<li><a class="reference internal" href="../examples/pylab_examples/figlegend_demo.html#pylab-examples-figlegend-demo"><span>pylab_examples example code: figlegend_demo.py</span></a></li>
<li><a class="reference internal" href="../examples/pylab_examples/finance_work2.html#pylab-examples-finance-work2"><span>pylab_examples example code: finance_work2.py</span></a></li>
<li><a class="reference internal" href="../examples/pylab_examples/scatter_symbol.html#pylab-examples-scatter-symbol"><span>pylab_examples example code: scatter_symbol.py</span></a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="clearer"></div>
</div>
<div class="footer">
        © Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the matplotlib development team; 2012 - 2014 The matplotlib development team.
      Last updated on Oct 29, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55954603-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>