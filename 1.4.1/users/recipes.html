<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Our Favorite Recipes &mdash; Matplotlib 1.4.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/mpl.css"
type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css"
type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib 1.4.1 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="top" title="Matplotlib 1.4.1 documentation" href="../index.html" />
    <link rel="up" title="Advanced Guide" href="developer.html" />
    <link rel="next" title="What’s new in matplotlib" href="whats_new.html" />
    <link rel="prev" title="Path effects guide" href="patheffects_guide.html" /> 
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

    <link rel="canonical" href="https://matplotlib.org/2.0.2/users/recipes.html" />
    <script data-domain="matplotlib.org" defer="defer" src="https://views.scientific-python.org/js/script.js"></script>
  </head>
  <body>
<div id="unreleased-message"> You are reading an old version of the documentation (v1.4.1).  For the latest version see <a href="/stable/">https://matplotlib.org/stable/</a> </div>



<link rel="shortcut icon" href="/_static/favicon.ico">

<!-- The "Fork me on github" ribbon -->
<img style="float: right; margin-bottom: -40px; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" usemap="#ribbonmap"/>
<map name="ribbonmap">
    <area shape="poly" coords="15,0,148,-1,148,135" href="https://github.com/matplotlib/matplotlib" title="Fork me on GitHub" />
</map>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../index.html"><img src="../_static/logo2.png" border="0" alt="matplotlib"/></a>
</div>




    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="whats_new.html" title="What’s new in matplotlib"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="patheffects_guide.html" title="Path effects guide"
             accesskey="P">previous</a> |</li>

        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../api/pyplot_summary.html">pyplot</a>|&nbsp;</li>
        <li><a href="../contents.html">docs</a> &raquo;</li>
          <li><a href="index.html" >User&#8217;s Guide</a> &raquo;</li>
          <li><a href="developer.html" accesskey="U">Advanced Guide</a> &raquo;</li> 
      </ul>
    </div>

  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Our Favorite Recipes</a><ul>
<li><a class="reference internal" href="#sharing-axis-limits-and-views">Sharing axis limits and views</a></li>
<li><a class="reference internal" href="#easily-creating-subplots">Easily creating subplots</a></li>
<li><a class="reference internal" href="#fixing-common-date-annoyances">Fixing common date annoyances</a></li>
<li><a class="reference internal" href="#fill-between-and-alpha">Fill Between and Alpha</a></li>
<li><a class="reference internal" href="#transparent-fancy-legends">Transparent, fancy legends</a></li>
<li><a class="reference internal" href="#placing-text-boxes">Placing text boxes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="patheffects_guide.html"
                        title="previous chapter">Path effects guide</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="whats_new.html"
                        title="next chapter">What&#8217;s new in matplotlib</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/users/recipes.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="our-favorite-recipes">
<span id="recipes"></span><h1>Our Favorite Recipes<a class="headerlink" href="#our-favorite-recipes" title="Permalink to this headline">¶</a></h1>
<p>Here is a collection of short tutorials, examples and code snippets
that illustrate some of the useful idioms and tricks to make snazzier
figures and overcome some matplotlib warts.</p>
<div class="section" id="sharing-axis-limits-and-views">
<h2>Sharing axis limits and views<a class="headerlink" href="#sharing-axis-limits-and-views" title="Permalink to this headline">¶</a></h2>
<p>It&#8217;s common to make two or more plots which share an axis, eg two
subplots with time as a common axis.  When you pan and zoom around on
one, you want the other to move around with you.  To facilitate this,
matplotlib Axes support a <code class="docutils literal"><span class="pre">sharex</span></code> and <code class="docutils literal"><span class="pre">sharey</span></code> attribute.  When
you create a <a class="reference internal" href="../api/pyplot_api.html#matplotlib.pyplot.subplot" title="matplotlib.pyplot.subplot"><code class="xref py py-func docutils literal"><span class="pre">subplot()</span></code></a> or
<a class="reference internal" href="../api/pyplot_api.html#matplotlib.pyplot.axes" title="matplotlib.pyplot.axes"><code class="xref py py-func docutils literal"><span class="pre">axes()</span></code></a> instance, you can pass in a keyword
indicating what axes you want to share with</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [96]: </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>

<span class="gp">In [97]: </span><span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">)</span>

<span class="gp">In [98]: </span><span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">t</span><span class="p">))</span>
<span class="gh">Out[98]: </span><span class="go">[&lt;matplotlib.lines.Line2D object at 0x98719ec&gt;]</span>

<span class="gp">In [99]: </span><span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>

<span class="gp">In [100]: </span><span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">t</span><span class="p">))</span>
<span class="gh">Out[100]: </span><span class="go">[&lt;matplotlib.lines.Line2D object at 0xb7d8fec&gt;]</span>
</pre></div>
</div>
</div>
<div class="section" id="easily-creating-subplots">
<h2>Easily creating subplots<a class="headerlink" href="#easily-creating-subplots" title="Permalink to this headline">¶</a></h2>
<p>In early versions of matplotlib, if you wanted to use the pythonic API
and create a figure instance and from that create a grid of subplots,
possibly with shared axes, it involved a fair amount of boilerplate
code.  e.g.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># old style</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">221</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">222</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">223</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">224</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
</pre></div>
</div>
<p>Fernando Perez has provided a nice top level method to create in
<code class="xref py py-func docutils literal"><span class="pre">subplots()</span></code> (note the &#8220;s&#8221; at the end)
everything at once, and turn off x and y sharing for the whole bunch.
You can either unpack the axes individually:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># new style method 1; unpack the axes</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">((</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">),</span> <span class="p">(</span><span class="n">ax3</span><span class="p">,</span> <span class="n">ax4</span><span class="p">))</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>or get them back as a numrows x numcolumns object array which supports
numpy indexing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># new style method 2; use an axes array</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="fixing-common-date-annoyances">
<h2>Fixing common date annoyances<a class="headerlink" href="#fixing-common-date-annoyances" title="Permalink to this headline">¶</a></h2>
<p>(<a class="reference external" href="../users/recipes-1.py">Source code</a>)</p>
<p>matplotlib allows you to natively plots python datetime instances, and
for the most part does a good job picking tick locations and string
formats.  There are a couple of things it does not handle so
gracefully, and here are some tricks to help you work around them.
We&#8217;ll load up some sample date data which contains datetime.date
objects in a numpy record array:</p>
<div class="highlight-python"><div class="highlight"><pre>In [63]: datafile = cbook.get_sample_data(&#39;goog.npy&#39;)

In [64]: r = np.load(datafile).view(np.recarray)

In [65]: r.dtype
Out[65]: dtype([(&#39;date&#39;, &#39;|O4&#39;), (&#39;&#39;, &#39;|V4&#39;), (&#39;open&#39;, &#39;&lt;f8&#39;),
                (&#39;high&#39;, &#39;&lt;f8&#39;), (&#39;low&#39;, &#39;&lt;f8&#39;), (&#39;close&#39;, &#39;&lt;f8&#39;),
                (&#39;volume&#39;, &#39;&lt;i8&#39;),  (&#39;adj_close&#39;, &#39;&lt;f8&#39;)])

In [66]: r.date
Out[66]:
array([2004-08-19, 2004-08-20, 2004-08-23, ..., 2008-10-10, 2008-10-13,
       2008-10-14], dtype=object)
</pre></div>
</div>
<p>The dtype of the numpy record array for the field <code class="docutils literal"><span class="pre">date</span></code> is <code class="docutils literal"><span class="pre">|O4</span></code>
which means it is a 4-byte python object pointer; in this case the
objects are datetime.date instances, which we can see when we print
some samples in the ipython terminal window.</p>
<p>If you plot the data,</p>
<div class="highlight-python"><div class="highlight"><pre>In [67]: plot(r.date, r.close)
Out[67]: [&lt;matplotlib.lines.Line2D object at 0x92a6b6c&gt;]
</pre></div>
</div>
<p>you will see that the x tick labels are all squashed together.</p>
<p>(<a class="reference external" href="../users/recipes-2.py">Source code</a>, <a class="reference external" href="../users/recipes-2.png">png</a>, <a class="reference external" href="../users/recipes-2.hires.png">hires.png</a>, <a class="reference external" href="../users/recipes-2.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/recipes-2.png" src="../_images/recipes-2.png" />
</div>
<p>Another annoyance is that if you hover the mouse over the window and
look in the lower right corner of the matplotlib toolbar
(<a class="reference internal" href="navigation_toolbar.html#navigation-toolbar"><em>Interactive navigation</em></a>) at the x and y coordinates, you see that
the x locations are formatted the same way the tick labels are, eg
&#8220;Dec 2004&#8221;.  What we&#8217;d like is for the location in the toolbar to have
a higher degree of precision, eg giving us the exact date out mouse is
hovering over.  To fix the first problem, we can use
<a class="reference internal" href="../api/figure_api.html#matplotlib.figure.Figure.autofmt_xdate" title="matplotlib.figure.Figure.autofmt_xdate"><code class="xref py py-func docutils literal"><span class="pre">matplotlib.figure.Figure.autofmt_xdate()</span></code></a> and to fix the second
problem we can use the <code class="docutils literal"><span class="pre">ax.fmt_xdata</span></code> attribute which can be set to
any function that takes a scalar and returns a string.  matplotlib has
a number of date formatters built in, so we&#8217;ll use one of those.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s">&#39;all&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>

<span class="c"># rotate and align the tick labels so they look better</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>

<span class="c"># use a more precise date string for the x axis locations in the</span>
<span class="c"># toolbar</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="kn">as</span> <span class="nn">mdates</span>
<span class="n">ax</span><span class="o">.</span><span class="n">fmt_xdata</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s">&#39;%Y-%m-</span><span class="si">%d</span><span class="s">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;fig.autofmt_xdate fixes the labels&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/recipes-3.py">Source code</a>, <a class="reference external" href="../users/recipes-3.png">png</a>, <a class="reference external" href="../users/recipes-3.hires.png">hires.png</a>, <a class="reference external" href="../users/recipes-3.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/recipes-3.png" src="../_images/recipes-3.png" />
</div>
<p>Now when you hover your mouse over the plotted data, you&#8217;ll see date
format strings like 2004-12-01 in the toolbar.</p>
</div>
<div class="section" id="fill-between-and-alpha">
<h2>Fill Between and Alpha<a class="headerlink" href="#fill-between-and-alpha" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../api/axes_api.html#matplotlib.axes.Axes.fill_between" title="matplotlib.axes.Axes.fill_between"><code class="xref py py-meth docutils literal"><span class="pre">fill_between()</span></code></a> function generates a
shaded region between a min and max boundary that is useful for
illustrating ranges.  It has a very handy <code class="docutils literal"><span class="pre">where</span></code> argument to
combine filling with logical ranges, eg to just fill in a curve over
some threshold value.</p>
<p>At its most basic level, <code class="docutils literal"><span class="pre">fill_between</span></code> can be use to enhance a
graphs visual appearance. Let&#8217;s compare two graphs of a financial
times with a simple line plot on the left and a filled line on the
right.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">matplotlib.cbook</span> <span class="kn">as</span> <span class="nn">cbook</span>

<span class="c"># load up some sample financial data</span>
<span class="n">datafile</span> <span class="o">=</span> <span class="n">cbook</span><span class="o">.</span><span class="n">get_sample_data</span><span class="p">(</span><span class="s">&#39;goog.npy&#39;</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">datafile</span><span class="p">)</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">recarray</span><span class="p">)</span>

<span class="c"># create two subplots with the shared x and y axes</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">pricemin</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">close</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">close</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">pricemin</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">close</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;price&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">ax2</span><span class="o">.</span><span class="n">get_yticklabels</span><span class="p">():</span>
    <span class="n">label</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s">&#39;Google (GOOG) daily closing price&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/recipes-4.py">Source code</a>, <a class="reference external" href="../users/recipes-4.png">png</a>, <a class="reference external" href="../users/recipes-4.hires.png">hires.png</a>, <a class="reference external" href="../users/recipes-4.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/recipes-4.png" src="../_images/recipes-4.png" />
</div>
<p>The alpha channel is not necessary here, but it can be used to soften
colors for more visually appealing plots.  In other examples, as we&#8217;ll
see below, the alpha channel is functionally useful as the shaded
regions can overlap and alpha allows you to see both.  Note that the
postscript format does not support alpha (this is a postscript
limitation, not a matplotlib limitation), so when using alpha save
your figures in PNG, PDF or SVG.</p>
<p>Our next example computes two populations of random walkers with a
different mean and standard deviation of the normal distributions from
which the steps are drawn.  We use shared regions to plot +/- one
standard deviation of the mean position of the population.  Here the
alpha channel is useful, not just aesthetic.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">Nsteps</span><span class="p">,</span> <span class="n">Nwalkers</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">250</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">Nsteps</span><span class="p">)</span>

<span class="c"># an (Nsteps x Nwalkers) array of random walk steps</span>
<span class="n">S1</span> <span class="o">=</span> <span class="mf">0.002</span> <span class="o">+</span> <span class="mf">0.01</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">Nsteps</span><span class="p">,</span> <span class="n">Nwalkers</span><span class="p">)</span>
<span class="n">S2</span> <span class="o">=</span> <span class="mf">0.004</span> <span class="o">+</span> <span class="mf">0.02</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">Nsteps</span><span class="p">,</span> <span class="n">Nwalkers</span><span class="p">)</span>

<span class="c"># an (Nsteps x Nwalkers) array of random walker positions</span>
<span class="n">X1</span> <span class="o">=</span> <span class="n">S1</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">X2</span> <span class="o">=</span> <span class="n">S2</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>


<span class="c"># Nsteps length arrays empirical means and standard deviations of both</span>
<span class="c"># populations over time</span>
<span class="n">mu1</span> <span class="o">=</span> <span class="n">X1</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">sigma1</span> <span class="o">=</span> <span class="n">X1</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mu2</span> <span class="o">=</span> <span class="n">X2</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">sigma2</span> <span class="o">=</span> <span class="n">X2</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c"># plot it!</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">mu1</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;mean population 1&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">mu1</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;mean population 2&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;yellow&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">mu1</span><span class="o">+</span><span class="n">sigma1</span><span class="p">,</span> <span class="n">mu1</span><span class="o">-</span><span class="n">sigma1</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">mu2</span><span class="o">+</span><span class="n">sigma2</span><span class="p">,</span> <span class="n">mu2</span><span class="o">-</span><span class="n">sigma2</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s">&#39;yellow&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;random walkers empirical $\mu$ and $\pm \sigma$ interval&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">&#39;upper left&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;num steps&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;position&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/recipes-5.py">Source code</a>, <a class="reference external" href="../users/recipes-5.png">png</a>, <a class="reference external" href="../users/recipes-5.hires.png">hires.png</a>, <a class="reference external" href="../users/recipes-5.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/recipes-5.png" src="../_images/recipes-5.png" />
</div>
<p>The <code class="docutils literal"><span class="pre">where</span></code> keyword argument is very handy for highlighting certain
regions of the graph.  <code class="docutils literal"><span class="pre">where</span></code> takes a boolean mask the same length
as the x, ymin and ymax arguments, and only fills in the region where
the boolean mask is True.  In the example below, we simulate a single
random walker and compute the analytic mean and standard deviation of
the population positions.  The population mean is shown as the black
dashed line, and the plus/minus one sigma deviation from the mean is
shown as the yellow filled region.  We use the where mask
<code class="docutils literal"><span class="pre">X&gt;upper_bound</span></code> to find the region where the walker is above the one
sigma boundary, and shade that region blue.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span>

<span class="n">Nsteps</span> <span class="o">=</span> <span class="mi">500</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">Nsteps</span><span class="p">)</span>

<span class="n">mu</span> <span class="o">=</span> <span class="mf">0.002</span>
<span class="n">sigma</span> <span class="o">=</span> <span class="mf">0.01</span>

<span class="c"># the steps and position</span>
<span class="n">S</span> <span class="o">=</span> <span class="n">mu</span> <span class="o">+</span> <span class="n">sigma</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">Nsteps</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>

<span class="c"># the 1 sigma upper and lower analytic population bounds</span>
<span class="n">lower_bound</span> <span class="o">=</span> <span class="n">mu</span><span class="o">*</span><span class="n">t</span> <span class="o">-</span> <span class="n">sigma</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="n">upper_bound</span> <span class="o">=</span> <span class="n">mu</span><span class="o">*</span><span class="n">t</span> <span class="o">+</span> <span class="n">sigma</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;walker position&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">mu</span><span class="o">*</span><span class="n">t</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;population mean&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;black&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s">&#39;--&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">lower_bound</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s">&#39;yellow&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s">&#39;1 sigma range&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">&#39;upper left&#39;</span><span class="p">)</span>

<span class="c"># here we use the where argument to only fill the region where the</span>
<span class="c"># walker is above the population 1 sigma boundary</span>
<span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="n">X</span><span class="o">&gt;</span><span class="n">upper_bound</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;num steps&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;position&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/recipes-6.py">Source code</a>, <a class="reference external" href="../users/recipes-6.png">png</a>, <a class="reference external" href="../users/recipes-6.hires.png">hires.png</a>, <a class="reference external" href="../users/recipes-6.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/recipes-6.png" src="../_images/recipes-6.png" />
</div>
<p>Another handy use of filled regions is to highlight horizontal or
vertical spans of an axes &#8211; for that matplotlib has some helper
functions <a class="reference internal" href="../api/axes_api.html#matplotlib.axes.Axes.axhspan" title="matplotlib.axes.Axes.axhspan"><code class="xref py py-meth docutils literal"><span class="pre">axhspan()</span></code></a> and
<a class="reference internal" href="../api/axes_api.html#matplotlib.axes.Axes.axvspan" title="matplotlib.axes.Axes.axvspan"><code class="xref py py-meth docutils literal"><span class="pre">axvspan()</span></code></a> and example
<a class="reference internal" href="../examples/pylab_examples/axhspan_demo.html#pylab-examples-axhspan-demo"><em>pylab_examples example code: axhspan_demo.py</em></a>.</p>
</div>
<div class="section" id="transparent-fancy-legends">
<h2>Transparent, fancy legends<a class="headerlink" href="#transparent-fancy-legends" title="Permalink to this headline">¶</a></h2>
<p>Sometimes you know what your data looks like before you plot it, and
may know for instance that there won&#8217;t be much data in the upper right
hand corner.  Then you can safely create a legend that doesn&#8217;t overlay
your data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">&#39;upper right&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Other times you don&#8217;t know where your data is, and loc=&#8217;best&#8217; will try
and place the legend:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">&#39;best&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>but still, your legend may overlap your data, and in these cases it&#8217;s
nice to make the legend frame transparent.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">300</span><span class="p">),</span> <span class="s">&#39;o-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;normal distribution&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">300</span><span class="p">),</span> <span class="s">&#39;s-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;uniform distribution&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">&#39;best&#39;</span><span class="p">,</span> <span class="n">fancybox</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;fancy, transparent legends&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/recipes-7.py">Source code</a>, <a class="reference external" href="../users/recipes-7.png">png</a>, <a class="reference external" href="../users/recipes-7.hires.png">hires.png</a>, <a class="reference external" href="../users/recipes-7.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/recipes-7.png" src="../_images/recipes-7.png" />
</div>
</div>
<div class="section" id="placing-text-boxes">
<h2>Placing text boxes<a class="headerlink" href="#placing-text-boxes" title="Permalink to this headline">¶</a></h2>
<p>When decorating axes with text boxes, two useful tricks are to place
the text in axes coordinates (see <a class="reference internal" href="transforms_tutorial.html#transforms-tutorial"><em>Transformations Tutorial</em></a>), so the
text doesn&#8217;t move around with changes in x or y limits.  You can also
use the <code class="docutils literal"><span class="pre">bbox</span></code> property of text to surround the text with a
<a class="reference internal" href="../api/patches_api.html#matplotlib.patches.Patch" title="matplotlib.patches.Patch"><code class="xref py py-class docutils literal"><span class="pre">Patch</span></code></a> instance &#8211; the <code class="docutils literal"><span class="pre">bbox</span></code> keyword
argument takes a dictionary with keys that are Patch properties.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">30</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">mu</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">median</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">sigma</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
<span class="n">textstr</span> <span class="o">=</span> <span class="s">&#39;$\mu=</span><span class="si">%.2f</span><span class="s">$</span><span class="se">\n</span><span class="s">$\mathrm{median}=</span><span class="si">%.2f</span><span class="s">$</span><span class="se">\n</span><span class="s">$\sigma=</span><span class="si">%.2f</span><span class="s">$&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">median</span><span class="p">,</span> <span class="n">sigma</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="c"># these are matplotlib.patch.Patch properties</span>
<span class="n">props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s">&#39;round&#39;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s">&#39;wheat&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c"># place a text box in upper left in axes coords</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span> <span class="n">textstr</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
        <span class="n">verticalalignment</span><span class="o">=</span><span class="s">&#39;top&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">props</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../users/recipes-8.py">Source code</a>, <a class="reference external" href="../users/recipes-8.png">png</a>, <a class="reference external" href="../users/recipes-8.hires.png">hires.png</a>, <a class="reference external" href="../users/recipes-8.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/recipes-8.png" src="../_images/recipes-8.png" />
</div>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the matplotlib development team; 2012 - 2014 The matplotlib development team.
      Last updated on Oct 18, 2014.
      Created using <a
href="http://sphinx-doc.org/">Sphinx</a> 1.3b2.
    </div>

</body>
</html>