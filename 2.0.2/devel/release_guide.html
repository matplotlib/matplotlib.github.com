<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Release Guide &mdash; Matplotlib 2.0.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/mpl.css"
type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css"
type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib 2.0.2 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html"
/>
    <link rel="search" title="Search" href="../search.html"
/>
    <link rel="top" title="Matplotlib 2.0.2 documentation" href="../index.html" />
    <link rel="up" title="The Matplotlib Developers’ Guide" href="index.html" />
    <link rel="next" title="Matplotlib Enhancement Proposals" href="MEP/index.html" />
    <link rel="prev" title="Reviewers guideline" href="coding_guide.html" /> 


    <link rel="canonical" href="https://matplotlib.org/stable/devel/release_guide.html" />
  </head>
  <body>
<div id="unreleased-message"> You are reading an old version of the documentation (v2.0.2).  For the latest version see <a href="https://matplotlib.org/stable/devel/release_guide.html">https://matplotlib.org/stable/devel/release_guide.html</a></div>



<!-- The "Fork me on github" ribbon -->
<img style="float: right; margin-bottom: -40px; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" usemap="#ribbonmap"/>
<map name="ribbonmap">
    <area shape="poly" coords="15,0,148,-1,148,135" href="https://github.com/matplotlib/matplotlib" title="Fork me on GitHub" />
</map>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../index.html"><img src="../_static/logo2.svg" width="540px" border="0" alt="matplotlib"/></a>
</div>




    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="MEP/index.html" title="Matplotlib Enhancement Proposals"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="coding_guide.html" title="Reviewers guideline"
             accesskey="P">previous</a> |</li>

        <li><a href="../index.html">home</a>|&nbsp;</li>
        <li><a href="../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../api/pyplot_summary.html">pyplot</a>|&nbsp;</li>
        <li><a href="../contents.html">docs</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">The Matplotlib Developers&#8217; Guide</a> &raquo;</li> 
      </ul>
    </div>

  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<a href="http://depsy.org/package/python/matplotlib">
  <img src="../_static/depsy_badge.svg">
</a>

<br/>

Travis-CI: <a href="https://travis-ci.org/matplotlib/matplotlib">
  <img src="https://travis-ci.org/matplotlib/matplotlib.svg?branch=master"/>
</a>
<br/>
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Release Guide</a><ul>
<li><a class="reference internal" href="#all-releases">All Releases</a><ul>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#github-stats">GitHub Stats</a></li>
<li><a class="reference internal" href="#check-docs">Check Docs</a></li>
<li><a class="reference internal" href="#create-release-commit-and-tag">Create release commit and tag</a></li>
<li><a class="reference internal" href="#release-management-doi">Release Management / DOI</a></li>
<li><a class="reference internal" href="#building-binaries">Building binaries</a></li>
<li><a class="reference internal" href="#make-distribution-and-upload-to-pypi-sf">make distribution and upload to pypi / SF</a></li>
<li><a class="reference internal" href="#build-and-deploy-documentation">Build and Deploy Documentation</a></li>
<li><a class="reference internal" href="#announcing">Announcing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../contents.html">Documentation overview</a><ul>
  <li><a href="index.html">The Matplotlib Developers&#8217; Guide</a><ul>
      <li>Previous: <a href="coding_guide.html" title="previous chapter">Reviewers guideline</a></li>
      <li>Next: <a href="MEP/index.html" title="next chapter">Matplotlib Enhancement Proposals</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/devel/release_guide.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="release-guide">
<span id="id1"></span><h1>Release Guide<a class="headerlink" href="#release-guide" title="Permalink to this headline">¶</a></h1>
<p>A guide for developers who are doing a matplotlib release.</p>
<div class="section" id="all-releases">
<h2>All Releases<a class="headerlink" href="#all-releases" title="Permalink to this headline">¶</a></h2>
<div class="section" id="testing">
<span id="release-testing"></span><h3>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h3>
<p>We use <a class="reference external" href="https://travis-ci.org/matplotlib/matplotlib">travis-ci</a> for
continuous integration.  When preparing for a release, the final
tagged commit should be tested locally before it is uploaded:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>python tests.py --processes<span class="o">=</span><span class="m">8</span> --process-timeout<span class="o">=</span><span class="m">300</span>
</pre></div>
</div>
<p>In addition the following two tests should be run and manually inspected:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>python unit/memleak_hawaii3.py
<span class="nb">pushd</span> examples/tests/
python backend_driver.py
<span class="nb">popd</span>
</pre></div>
</div>
</div>
<div class="section" id="github-stats">
<span id="release-ghstats"></span><h3>GitHub Stats<a class="headerlink" href="#github-stats" title="Permalink to this headline">¶</a></h3>
<p>We automatically extract GitHub issue, PRs, and authors from GitHub via the API:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>python tools/github_stats.py --since-tag <span class="nv">$TAG</span> --project <span class="s1">&#39;matplotlib/matplotlib&#39;</span> --links &gt; doc/users/github_stats.rst
</pre></div>
</div>
<p>Review and commit changes.  Some issue/PR titles may not be valid rst (the most common issue is
<code class="docutils literal"><span class="pre">*</span></code> which is interpreted as unclosed markup).</p>
</div>
<div class="section" id="check-docs">
<span id="release-chkdocs"></span><h3>Check Docs<a class="headerlink" href="#check-docs" title="Permalink to this headline">¶</a></h3>
<p>Before tagging, make sure that the docs build cleanly</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">pushd</span> doc
python make.py html latex -n <span class="m">16</span>
<span class="nb">popd</span>
</pre></div>
</div>
<p>After the docs are built, check that all of the links, internal and external, are still
valid.  We use <code class="docutils literal"><span class="pre">linkchecker</span></code> for this, which has not been ported to python3 yet.  You will
need to create a python2 environment with <code class="docutils literal"><span class="pre">requests==2.9.0</span></code> and linkchecker</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>conda create -p /tmp/lnkchk <span class="nv">python</span><span class="o">=</span><span class="m">2</span> <span class="nv">requests</span><span class="o">==</span><span class="m">2</span>.9.0
<span class="nb">source</span> activate /tmp/lnkchk
pip install linkchecker
<span class="nb">pushd</span> doc/build/html
linkchecker index.html --check-extern
</pre></div>
</div>
<p>Address any issues which may arise.  The internal links are checked on travis, this should only
flag failed external links.</p>
</div>
<div class="section" id="create-release-commit-and-tag">
<span id="release-tag"></span><h3>Create release commit and tag<a class="headerlink" href="#create-release-commit-and-tag" title="Permalink to this headline">¶</a></h3>
<p>To create the tag, first create an empty commit with a very terse set of the release notes
in the commit message</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git commit --allow-empty
</pre></div>
</div>
<p>and then create a signed, annotated tag with the same text in the body
message</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git tag -a -s v2.0.0
</pre></div>
</div>
<p>which will prompt you for your gpg key password and an annotation.
For pre releases it is important to follow <span class="target" id="index-0"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0440"><strong>PEP 440</strong></a> so that the
build artifacts will sort correctly in pypi.  Finally, push the tag to GitHub</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git push -t DANGER v2.0.0
</pre></div>
</div>
<p>Congratulations, the scariest part is done!</p>
<p>To prevent issues with any down-stream builders which download the
tarball from GitHub it is important to move all branches away from the commit
with the tag <a class="footnote-reference" href="#id3" id="id2">[1]</a>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git commit --allow-empty
git push DANGER master
</pre></div>
</div>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td><p class="first">The tarball that is provided by GitHub is produced using <a class="reference external" href="https://git-scm.com/docs/git-archive">git
archive</a>.  We use
<a class="reference external" href="https://github.com/warner/python-versioneer">versioneer</a>
which uses a format string in
<code class="file docutils literal"><span class="pre">lib/matplotlib/_version.py</span></code> to have <code class="docutils literal"><span class="pre">git</span></code> insert a
list of references to exported commit (see
<code class="file docutils literal"><span class="pre">.gitattributes</span></code> for the configuration).  This string is
then used by <code class="docutils literal"><span class="pre">versioneer</span></code> to produce the correct version,
based on the git tag, when users install from the tarball.
However, if there is a branch pointed at the tagged commit,
then the branch name will also be included in the tarball.
When the branch eventually moves, anyone how checked the hash
of the tarball before the branch moved will have an incorrect
hash.</p>
<p>To generate the file that GitHub does use</p>
<div class="last highlight-bash"><div class="highlight"><pre><span></span>git archive v2.0.0 -o matplotlib-2.0.0.tar.gz --prefix<span class="o">=</span>matplotlib-2.0.0/
</pre></div>
</div>
</td></tr>
</tbody>
</table>
<p>If this is a final release, also create a &#8216;doc&#8217; branch (this is not
done for pre-releases):</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git branch v2.0.0-doc
git push DANGER v2.0.0-doc
</pre></div>
</div>
<p>and if this is a major or minor release, also create a bug-fix branch (a
micro release will be cut off of this branch):</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git branch v2.0.x
git push DANGER v2.0.x
</pre></div>
</div>
</div>
<div class="section" id="release-management-doi">
<span id="release-doi"></span><h3>Release Management / DOI<a class="headerlink" href="#release-management-doi" title="Permalink to this headline">¶</a></h3>
<p>Via the GitHub UI (chase down link), turn the newly pushed tag into a
release.  If this is a pre-release remember to mark it as such.</p>
<p>For final releases also get a DOI from <a class="reference external" href="https://zenodo.org/">zenodo</a> and edit <code class="file docutils literal"><span class="pre">doc/_templates/citing.html</span></code>
with DOI link and commit to the VER-doc branch and push to GitHub</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git checkout v2.0.0-doc
emacs doc/_templates/citing.html
git push DANGER v2.0.0-doc:v2.0.0-doc
</pre></div>
</div>
</div>
<div class="section" id="building-binaries">
<span id="release-bld-bin"></span><h3>Building binaries<a class="headerlink" href="#building-binaries" title="Permalink to this headline">¶</a></h3>
<p>We distribute mac, windows, and many linux wheels as well as a source
tarball via pypi.  Before uploading anything, contact the various
builders.  Mac and manylinux wheels are built on travis .  You need to
edit the <code class="file docutils literal"><span class="pre">.travis.yml</span></code> file and push to master of <a class="reference external" href="https://github.com/MacPython/matplotlib-wheels">the build
project</a>.</p>
<p>Update the <code class="docutils literal"><span class="pre">master</span></code> branch (for pre-releases the <code class="docutils literal"><span class="pre">devel</span></code> branch)
of the <a class="reference external" href="https://github.com/conda-forge/matplotlib-feedstock">conda-forge feedstock</a> via pull request.</p>
<p>If this is a final release the following downstream packagers should be contacted:</p>
<ul class="simple">
<li>Debian</li>
<li>Fedora</li>
<li>Arch</li>
<li>Gentoo</li>
<li>Macports</li>
<li>Homebrew</li>
<li>Christoph Gohlke</li>
<li>Continuum</li>
<li>Enthought</li>
</ul>
<p>This can be done ahead of collecting all of the binaries and uploading to pypi.</p>
</div>
<div class="section" id="make-distribution-and-upload-to-pypi-sf">
<span id="release-upload-bin"></span><h3>make distribution and upload to pypi / SF<a class="headerlink" href="#make-distribution-and-upload-to-pypi-sf" title="Permalink to this headline">¶</a></h3>
<p>Once you have collected all of the wheels, generate the tarball</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git checkout v2.0.0
git clean -xfd
python setup.py sdist
</pre></div>
</div>
<p>and copy all of the wheels into <code class="file docutils literal"><span class="pre">dist</span></code> directory.  You should use
<code class="docutils literal"><span class="pre">twine</span></code> to upload all of the files to pypi</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>twine upload -s dist/matplotlib*tar.gz
twine upload dist/*whl
</pre></div>
</div>
<p>Congratulations, you have now done the second scariest part!</p>
<p>Additionally, for a final release, upload all of the files to sourceforge.</p>
</div>
<div class="section" id="build-and-deploy-documentation">
<span id="release-docs"></span><h3>Build and Deploy Documentation<a class="headerlink" href="#build-and-deploy-documentation" title="Permalink to this headline">¶</a></h3>
<p>To build the documentation you must have the tagged version installed, but
build the docs from the <code class="docutils literal"><span class="pre">ver-doc</span></code> branch.  An easy way to arrange this is:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip install matplotlib
pip install -r doc-requirements.txt
git checkout v2.0.0-doc
git clean -xfd
<span class="nb">cd</span> doc
python make.py html latex -n <span class="m">16</span>
</pre></div>
</div>
<p>which will build both the html and pdf version of the documentation.</p>
<p>The built documentation exists in the <a class="reference external" href="https://github.com/matplotlib/matplotlib.github.com/">matplotlib.github.com</a> repository.
Pushing changes to master automatically updates the website.</p>
<p>The documentation is organized by version.  At the root of the tree is
always the documentation for the latest stable release.  Under that,
there are directories containing the documentation for older versions.
The documentation for current master are built on travis and push to
the <a class="reference external" href="https://github.com/matplotlib/devdocs/">devdocs</a> repository.
These are available at <a class="reference external" href="http://matplotlib.org/devdocs">matplotlib.org/devdocs</a>.</p>
<p>Assuming you have this repository checked out in the same directory as
matplotlib</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> ../matplotlib.github.com
mkdir <span class="m">2</span>.0.0
rsync -a ../matplotlib/doc/build/html/* <span class="m">2</span>.0.0
cp ../matplotlib/doc/build/latex/Matplotlib.pdf <span class="m">2</span>.0.0
</pre></div>
</div>
<p>which will copy the built docs over.  If this is a final release, also
replace the top-level docs</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>rsync -a <span class="m">2</span>.0.0/* ./
</pre></div>
</div>
<p>You will need to manually edit <code class="file docutils literal"><span class="pre">versions.html</span></code> to show the last
3 tagged versions.  Now commit and push everything to GitHub</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git add *
git commit -a -m <span class="s1">&#39;Updating docs for v2.0.0&#39;</span>
git push DANGER master
</pre></div>
</div>
<p>Congratulations you have now done the third scariest part!</p>
<p>It typically takes about 5-10 minutes for GitHub to process the push
and update the live web page (remember to clear your browser cache).</p>
</div>
<div class="section" id="announcing">
<h3>Announcing<a class="headerlink" href="#announcing" title="Permalink to this headline">¶</a></h3>
<p>The final step is to announce the release to the world.  A short
version of the release notes along with acknowledgments should be sent to</p>
<ul class="simple">
<li><a class="reference external" href="mailto:matplotlib-user&#37;&#52;&#48;python&#46;org">matplotlib-user<span>&#64;</span>python<span>&#46;</span>org</a></li>
<li><a class="reference external" href="mailto:matplotlib-devel&#37;&#52;&#48;python&#46;org">matplotlib-devel<span>&#64;</span>python<span>&#46;</span>org</a></li>
<li><a class="reference external" href="mailto:matplotlib-announce&#37;&#52;&#48;python&#46;org">matplotlib-announce<span>&#64;</span>python<span>&#46;</span>org</a></li>
</ul>
<p>For final releases announcements should also be sent to the
numpy/scipy/jupyter mailing lists and python-announce.</p>
<p>In addition, announcements should be made on social networks (twitter,
g+, FB).  For major release, <a class="reference external" href="http://www.numfocus.org/">NumFOCUS</a>
should be contacted for inclusion in their newsletter and maybe to
have something posted on their blog.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the Matplotlib development team; 2012 - 2016 The Matplotlib development team.
      Last updated on May 10, 2017.
      Created using <a
href="http://sphinx-doc.org/">Sphinx</a> 1.5.5.
    </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55954603-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
<footer>
</footer>
</html>