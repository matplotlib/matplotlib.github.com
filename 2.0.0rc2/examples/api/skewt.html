<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>api example code: skewt.py &mdash; Matplotlib 2.0.0rc2 documentation</title>
    
    <link rel="stylesheet" href="../../_static/mpl.css"
type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css"
type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0.0rc2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib 2.0.0rc2 documentation"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Matplotlib 2.0.0rc2 documentation" href="../../index.html" />
    <link rel="up" title="api Examples" href="index.html" />
    <link rel="next" title="api example code: span_regions.py" href="span_regions.html" />
    <link rel="prev" title="api example code: scatter_piecharts.py" href="scatter_piecharts.html" /> 


  </head>
  <body>



<!-- The "Fork me on github" ribbon -->
<img style="float: right; margin-bottom: -40px; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" usemap="#ribbonmap"/>
<map name="ribbonmap">
    <area shape="poly" coords="15,0,148,-1,148,135" href="https://github.com/matplotlib/matplotlib" title="Fork me on GitHub" />
</map>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../../index.html"><img src="../../_static/logo2.svg" width="540px" border="0" alt="matplotlib"/></a>
</div>




    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="span_regions.html" title="api example code: span_regions.py"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="scatter_piecharts.html" title="api example code: scatter_piecharts.py"
             accesskey="P">previous</a> |</li>

        <li><a href="../../index.html">home</a>|&nbsp;</li>
        <li><a href="../index.html">examples</a>|&nbsp;</li>
        <li><a href="../../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../../api/pyplot_summary.html">pyplot</a>|&nbsp;</li>
        <li><a href="../../contents.html">docs</a> &raquo;</li>
          <li><a href="../index.html" >Matplotlib Examples</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">api Examples</a> &raquo;</li> 
      </ul>
    </div>

  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<a href="http://depsy.org/package/python/matplotlib">
  <img src="http://depsy.org/api/package/pypi/matplotlib/badge.svg">
</a>

<br/>

Travis-CI: <a href="https://travis-ci.org/matplotlib/matplotlib">
  <img src="https://travis-ci.org/matplotlib/matplotlib.svg?branch=master"/>
</a>
<br/><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../contents.html">Documentation overview</a><ul>
  <li><a href="../index.html">Matplotlib Examples</a><ul>
  <li><a href="index.html">api Examples</a><ul>
      <li>Previous: <a href="scatter_piecharts.html" title="previous chapter">api example code: scatter_piecharts.py</a></li>
      <li>Next: <a href="span_regions.html" title="next chapter">api example code: span_regions.py</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/examples/api/skewt.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="api-example-code-skewt-py">
<span id="api-skewt"></span><h1>api example code: skewt.py<a class="headerlink" href="#api-example-code-skewt-py" title="Permalink to this headline">Â¶</a></h1>
<p>(<a class="reference external" href="../../mpl_examples/api/skewt.py">Source code</a>, <a class="reference external" href="../../mpl_examples/api/skewt.png">png</a>, <a class="reference external" href="../../mpl_examples/api/skewt.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../../_images/skewt.png" src="../../_images/skewt.png" />
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">===========================================================</span>
<span class="sd">SkewT-logP diagram: using transforms and custom projections</span>
<span class="sd">===========================================================</span>

<span class="sd">This serves as an intensive exercise of matplotlib&#39;s transforms and custom</span>
<span class="sd">projection API. This example produces a so-called SkewT-logP diagram, which is</span>
<span class="sd">a common plot in meteorology for displaying vertical profiles of temperature.</span>
<span class="sd">As far as matplotlib is concerned, the complexity comes from having X and Y</span>
<span class="sd">axes that are not orthogonal. This is handled by including a skew component to</span>
<span class="sd">the basic Axes transforms. Additional complexity comes in handling the fact</span>
<span class="sd">that the upper and lower X-axes have different data ranges, which necessitates</span>
<span class="sd">a bunch of custom classes for ticks,spines, and the axis to handle this.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">matplotlib.axes</span> <span class="k">import</span> <span class="n">Axes</span>
<span class="kn">import</span> <span class="nn">matplotlib.transforms</span> <span class="k">as</span> <span class="nn">transforms</span>
<span class="kn">import</span> <span class="nn">matplotlib.axis</span> <span class="k">as</span> <span class="nn">maxis</span>
<span class="kn">import</span> <span class="nn">matplotlib.spines</span> <span class="k">as</span> <span class="nn">mspines</span>
<span class="kn">from</span> <span class="nn">matplotlib.projections</span> <span class="k">import</span> <span class="n">register_projection</span>


<span class="c1"># The sole purpose of this class is to look at the upper, lower, or total</span>
<span class="c1"># interval as appropriate and see what parts of the tick to draw, if any.</span>
<span class="k">class</span> <span class="nc">SkewXTick</span><span class="p">(</span><span class="n">maxis</span><span class="o">.</span><span class="n">XTick</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">update_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
        <span class="c1"># This ensures that the new value of the location is set before</span>
        <span class="c1"># any other updates take place</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loc</span> <span class="o">=</span> <span class="n">loc</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SkewXTick</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update_position</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_has_default_loc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_loc</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_need_lower</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_has_default_loc</span><span class="p">()</span> <span class="ow">or</span>
                <span class="n">transforms</span><span class="o">.</span><span class="n">interval_contains</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">lower_xlim</span><span class="p">,</span>
                                             <span class="bp">self</span><span class="o">.</span><span class="n">get_loc</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">_need_upper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_has_default_loc</span><span class="p">()</span> <span class="ow">or</span>
                <span class="n">transforms</span><span class="o">.</span><span class="n">interval_contains</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">upper_xlim</span><span class="p">,</span>
                                             <span class="bp">self</span><span class="o">.</span><span class="n">get_loc</span><span class="p">()))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gridOn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_gridOn</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_has_default_loc</span><span class="p">()</span> <span class="ow">or</span>
                <span class="n">transforms</span><span class="o">.</span><span class="n">interval_contains</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_view_interval</span><span class="p">(),</span>
                                             <span class="bp">self</span><span class="o">.</span><span class="n">get_loc</span><span class="p">())))</span>

    <span class="nd">@gridOn</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">gridOn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gridOn</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tick1On</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tick1On</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_need_lower</span><span class="p">()</span>

    <span class="nd">@tick1On</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">tick1On</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tick1On</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">label1On</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_label1On</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_need_lower</span><span class="p">()</span>

    <span class="nd">@label1On</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">label1On</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label1On</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tick2On</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tick2On</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_need_upper</span><span class="p">()</span>

    <span class="nd">@tick2On</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">tick2On</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tick2On</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">label2On</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_label2On</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_need_upper</span><span class="p">()</span>

    <span class="nd">@label2On</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">label2On</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label2On</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">get_view_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_view_interval</span><span class="p">()</span>


<span class="c1"># This class exists to provide two separate sets of intervals to the tick,</span>
<span class="c1"># as well as create instances of the custom tick</span>
<span class="k">class</span> <span class="nc">SkewXAxis</span><span class="p">(</span><span class="n">maxis</span><span class="o">.</span><span class="n">XAxis</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_get_tick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">major</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">SkewXTick</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">major</span><span class="o">=</span><span class="n">major</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_view_interval</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">upper_xlim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">lower_xlim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>


<span class="c1"># This class exists to calculate the separate data range of the</span>
<span class="c1"># upper X-axis and draw the spine there. It also provides this range</span>
<span class="c1"># to the X-axis artist for ticking and gridlines</span>
<span class="k">class</span> <span class="nc">SkewSpine</span><span class="p">(</span><span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_adjust_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">.</span><span class="n">vertices</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spine_type</span> <span class="o">==</span> <span class="s1">&#39;top&#39;</span><span class="p">:</span>
            <span class="n">pts</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">upper_xlim</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pts</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">lower_xlim</span>


<span class="c1"># This class handles registration of the skew-xaxes as a projection as well</span>
<span class="c1"># as setting up the appropriate transformations. It also overrides standard</span>
<span class="c1"># spines and axes instances as appropriate.</span>
<span class="k">class</span> <span class="nc">SkewXAxes</span><span class="p">(</span><span class="n">Axes</span><span class="p">):</span>
    <span class="c1"># The projection must specify a name.  This will be used be the</span>
    <span class="c1"># user to select the projection, i.e. ``subplot(111,</span>
    <span class="c1"># projection=&#39;skewx&#39;)``.</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;skewx&#39;</span>

    <span class="k">def</span> <span class="nf">_init_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Taken from Axes and modified to use our modified X-axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span> <span class="o">=</span> <span class="n">SkewXAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span> <span class="o">=</span> <span class="n">maxis</span><span class="o">.</span><span class="n">YAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">register_axis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yaxis</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_gen_axes_spines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">spines</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;top&#39;</span><span class="p">:</span> <span class="n">SkewSpine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">),</span>
                  <span class="s1">&#39;bottom&#39;</span><span class="p">:</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">),</span>
                  <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">),</span>
                  <span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="n">mspines</span><span class="o">.</span><span class="n">Spine</span><span class="o">.</span><span class="n">linear_spine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">)}</span>
        <span class="k">return</span> <span class="n">spines</span>

    <span class="k">def</span> <span class="nf">_set_lim_and_transforms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This is called once when the plot is created to set up all the</span>
<span class="sd">        transforms for the data, text and grids.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rot</span> <span class="o">=</span> <span class="mi">30</span>

        <span class="c1"># Get the standard transform setup from the Axes base class</span>
        <span class="n">Axes</span><span class="o">.</span><span class="n">_set_lim_and_transforms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Need to put the skew in the middle, after the scale and limits,</span>
        <span class="c1"># but before the transAxes. This way, the skew is done in Axes</span>
        <span class="c1"># coordinates thus performing the transform around the proper origin</span>
        <span class="c1"># We keep the pre-transAxes transform around for other users, like the</span>
        <span class="c1"># spines for finding bounds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transDataToAxes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">+</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">transLimits</span> <span class="o">+</span> <span class="n">transforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">skew_deg</span><span class="p">(</span><span class="n">rot</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># Create the full transform from Data to Pixels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transData</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transDataToAxes</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span>

        <span class="c1"># Blended transforms like this need to have the skewing applied using</span>
        <span class="c1"># both axes, in axes coords like before.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xaxis_transform</span> <span class="o">=</span> <span class="p">(</span><span class="n">transforms</span><span class="o">.</span><span class="n">blended_transform_factory</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transScale</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transLimits</span><span class="p">,</span>
            <span class="n">transforms</span><span class="o">.</span><span class="n">IdentityTransform</span><span class="p">())</span> <span class="o">+</span>
            <span class="n">transforms</span><span class="o">.</span><span class="n">Affine2D</span><span class="p">()</span><span class="o">.</span><span class="n">skew_deg</span><span class="p">(</span><span class="n">rot</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">transAxes</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lower_xlim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">viewLim</span><span class="o">.</span><span class="n">intervalx</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">upper_xlim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pts</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">transDataToAxes</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">pts</span><span class="p">)[:,</span> <span class="mi">0</span><span class="p">]</span>


<span class="c1"># Now register the projection with matplotlib so the user can select</span>
<span class="c1"># it.</span>
<span class="n">register_projection</span><span class="p">(</span><span class="n">SkewXAxes</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># Now make a simple example using the custom projection.</span>
    <span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="k">import</span> <span class="p">(</span><span class="n">MultipleLocator</span><span class="p">,</span> <span class="n">NullFormatter</span><span class="p">,</span>
                                   <span class="n">ScalarFormatter</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
    <span class="kn">from</span> <span class="nn">six</span> <span class="k">import</span> <span class="n">StringIO</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

    <span class="c1"># Some examples data</span>
    <span class="n">data_txt</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">  978.0    345    7.8    0.8     61   4.16    325     14  282.7  294.6  283.4</span>
<span class="s1">  971.0    404    7.2    0.2     61   4.01    327     17  282.7  294.2  283.4</span>
<span class="s1">  946.7    610    5.2   -1.8     61   3.56    335     26  282.8  293.0  283.4</span>
<span class="s1">  944.0    634    5.0   -2.0     61   3.51    336     27  282.8  292.9  283.4</span>
<span class="s1">  925.0    798    3.4   -2.6     65   3.43    340     32  282.8  292.7  283.4</span>
<span class="s1">  911.8    914    2.4   -2.7     69   3.46    345     37  282.9  292.9  283.5</span>
<span class="s1">  906.0    966    2.0   -2.7     71   3.47    348     39  283.0  293.0  283.6</span>
<span class="s1">  877.9   1219    0.4   -3.2     77   3.46      0     48  283.9  293.9  284.5</span>
<span class="s1">  850.0   1478   -1.3   -3.7     84   3.44      0     47  284.8  294.8  285.4</span>
<span class="s1">  841.0   1563   -1.9   -3.8     87   3.45    358     45  285.0  295.0  285.6</span>
<span class="s1">  823.0   1736    1.4   -0.7     86   4.44    353     42  290.3  303.3  291.0</span>
<span class="s1">  813.6   1829    4.5    1.2     80   5.17    350     40  294.5  309.8  295.4</span>
<span class="s1">  809.0   1875    6.0    2.2     77   5.57    347     39  296.6  313.2  297.6</span>
<span class="s1">  798.0   1988    7.4   -0.6     57   4.61    340     35  299.2  313.3  300.1</span>
<span class="s1">  791.0   2061    7.6   -1.4     53   4.39    335     33  300.2  313.6  301.0</span>
<span class="s1">  783.9   2134    7.0   -1.7     54   4.32    330     31  300.4  313.6  301.2</span>
<span class="s1">  755.1   2438    4.8   -3.1     57   4.06    300     24  301.2  313.7  301.9</span>
<span class="s1">  727.3   2743    2.5   -4.4     60   3.81    285     29  301.9  313.8  302.6</span>
<span class="s1">  700.5   3048    0.2   -5.8     64   3.57    275     31  302.7  313.8  303.3</span>
<span class="s1">  700.0   3054    0.2   -5.8     64   3.56    280     31  302.7  313.8  303.3</span>
<span class="s1">  698.0   3077    0.0   -6.0     64   3.52    280     31  302.7  313.7  303.4</span>
<span class="s1">  687.0   3204   -0.1   -7.1     59   3.28    281     31  304.0  314.3  304.6</span>
<span class="s1">  648.9   3658   -3.2  -10.9     55   2.59    285     30  305.5  313.8  305.9</span>
<span class="s1">  631.0   3881   -4.7  -12.7     54   2.29    289     33  306.2  313.6  306.6</span>
<span class="s1">  600.7   4267   -6.4  -16.7     44   1.73    295     39  308.6  314.3  308.9</span>
<span class="s1">  592.0   4381   -6.9  -17.9     41   1.59    297     41  309.3  314.6  309.6</span>
<span class="s1">  577.6   4572   -8.1  -19.6     39   1.41    300     44  310.1  314.9  310.3</span>
<span class="s1">  555.3   4877  -10.0  -22.3     36   1.16    295     39  311.3  315.3  311.5</span>
<span class="s1">  536.0   5151  -11.7  -24.7     33   0.97    304     39  312.4  315.8  312.6</span>
<span class="s1">  533.8   5182  -11.9  -25.0     33   0.95    305     39  312.5  315.8  312.7</span>
<span class="s1">  500.0   5680  -15.9  -29.9     29   0.64    290     44  313.6  315.9  313.7</span>
<span class="s1">  472.3   6096  -19.7  -33.4     28   0.49    285     46  314.1  315.8  314.1</span>
<span class="s1">  453.0   6401  -22.4  -36.0     28   0.39    300     50  314.4  315.8  314.4</span>
<span class="s1">  400.0   7310  -30.7  -43.7     27   0.20    285     44  315.0  315.8  315.0</span>
<span class="s1">  399.7   7315  -30.8  -43.8     27   0.20    285     44  315.0  315.8  315.0</span>
<span class="s1">  387.0   7543  -33.1  -46.1     26   0.16    281     47  314.9  315.5  314.9</span>
<span class="s1">  382.7   7620  -33.8  -46.8     26   0.15    280     48  315.0  315.6  315.0</span>
<span class="s1">  342.0   8398  -40.5  -53.5     23   0.08    293     52  316.1  316.4  316.1</span>
<span class="s1">  320.4   8839  -43.7  -56.7     22   0.06    300     54  317.6  317.8  317.6</span>
<span class="s1">  318.0   8890  -44.1  -57.1     22   0.05    301     55  317.8  318.0  317.8</span>
<span class="s1">  310.0   9060  -44.7  -58.7     19   0.04    304     61  319.2  319.4  319.2</span>
<span class="s1">  306.1   9144  -43.9  -57.9     20   0.05    305     63  321.5  321.7  321.5</span>
<span class="s1">  305.0   9169  -43.7  -57.7     20   0.05    303     63  322.1  322.4  322.1</span>
<span class="s1">  300.0   9280  -43.5  -57.5     20   0.05    295     64  323.9  324.2  323.9</span>
<span class="s1">  292.0   9462  -43.7  -58.7     17   0.05    293     67  326.2  326.4  326.2</span>
<span class="s1">  276.0   9838  -47.1  -62.1     16   0.03    290     74  326.6  326.7  326.6</span>
<span class="s1">  264.0  10132  -47.5  -62.5     16   0.03    288     79  330.1  330.3  330.1</span>
<span class="s1">  251.0  10464  -49.7  -64.7     16   0.03    285     85  331.7  331.8  331.7</span>
<span class="s1">  250.0  10490  -49.7  -64.7     16   0.03    285     85  332.1  332.2  332.1</span>
<span class="s1">  247.0  10569  -48.7  -63.7     16   0.03    283     88  334.7  334.8  334.7</span>
<span class="s1">  244.0  10649  -48.9  -63.9     16   0.03    280     91  335.6  335.7  335.6</span>
<span class="s1">  243.3  10668  -48.9  -63.9     16   0.03    280     91  335.8  335.9  335.8</span>
<span class="s1">  220.0  11327  -50.3  -65.3     15   0.03    280     85  343.5  343.6  343.5</span>
<span class="s1">  212.0  11569  -50.5  -65.5     15   0.03    280     83  346.8  346.9  346.8</span>
<span class="s1">  210.0  11631  -49.7  -64.7     16   0.03    280     83  349.0  349.1  349.0</span>
<span class="s1">  200.0  11950  -49.9  -64.9     15   0.03    280     80  353.6  353.7  353.6</span>
<span class="s1">  194.0  12149  -49.9  -64.9     15   0.03    279     78  356.7  356.8  356.7</span>
<span class="s1">  183.0  12529  -51.3  -66.3     15   0.03    278     75  360.4  360.5  360.4</span>
<span class="s1">  164.0  13233  -55.3  -68.3     18   0.02    277     69  365.2  365.3  365.2</span>
<span class="s1">  152.0  13716  -56.5  -69.5     18   0.02    275     65  371.1  371.2  371.1</span>
<span class="s1">  150.0  13800  -57.1  -70.1     18   0.02    275     64  371.5  371.6  371.5</span>
<span class="s1">  136.0  14414  -60.5  -72.5     19   0.02    268     54  376.0  376.1  376.0</span>
<span class="s1">  132.0  14600  -60.1  -72.1     19   0.02    265     51  380.0  380.1  380.0</span>
<span class="s1">  131.4  14630  -60.2  -72.2     19   0.02    265     51  380.3  380.4  380.3</span>
<span class="s1">  128.0  14792  -60.9  -72.9     19   0.02    266     50  381.9  382.0  381.9</span>
<span class="s1">  125.0  14939  -60.1  -72.1     19   0.02    268     49  385.9  386.0  385.9</span>
<span class="s1">  119.0  15240  -62.2  -73.8     20   0.01    270     48  387.4  387.5  387.4</span>
<span class="s1">  112.0  15616  -64.9  -75.9     21   0.01    265     53  389.3  389.3  389.3</span>
<span class="s1">  108.0  15838  -64.1  -75.1     21   0.01    265     58  394.8  394.9  394.8</span>
<span class="s1">  107.8  15850  -64.1  -75.1     21   0.01    265     58  395.0  395.1  395.0</span>
<span class="s1">  105.0  16010  -64.7  -75.7     21   0.01    272     50  396.9  396.9  396.9</span>
<span class="s1">  103.0  16128  -62.9  -73.9     21   0.02    277     45  402.5  402.6  402.5</span>
<span class="s1">  100.0  16310  -62.5  -73.5     21   0.02    285     36  406.7  406.8  406.7</span>
<span class="s1">    &#39;&#39;&#39;</span>

    <span class="c1"># Parse the data</span>
    <span class="n">sound_data</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">(</span><span class="n">data_txt</span><span class="p">)</span>
    <span class="n">p</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">Td</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">sound_data</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">unpack</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Create a new figure. The dimensions here give a good aspect ratio</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">6.5875</span><span class="p">,</span> <span class="mf">6.2125</span><span class="p">))</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;skewx&#39;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Plot the data using normal plotting functions, in this case using</span>
    <span class="c1"># log scaling in Y, as dictated by the typical meteorological plot</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">semilogy</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;C3&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">semilogy</span><span class="p">(</span><span class="n">Td</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;C2&#39;</span><span class="p">)</span>

    <span class="c1"># An example of a slanted line at constant X</span>
    <span class="n">l</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;C0&#39;</span><span class="p">)</span>

    <span class="c1"># Disables the log-formatting that comes with semilogy</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">ScalarFormatter</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_formatter</span><span class="p">(</span><span class="n">NullFormatter</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">1050</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Keywords: python, matplotlib, pylab, example, codex (see <a class="reference internal" href="../../faq/howto_faq.html#how-to-search-examples"><span class="std std-ref">Search examples</span></a>)</p>
</div>


          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the matplotlib development team; 2012 - 2016 The matplotlib development team.
      Last updated on Dec 19, 2016.
      Created using <a
href="http://sphinx-doc.org/">Sphinx</a> 1.4.3.
    </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55954603-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
<footer>
  <!--Flipcause Integration v3.0// Flipcause Integration Instructions:
Install the following code block once in the website Header (after <head> tag) -->

<style>

.fc-black_overlay{
display:none; position: fixed; z-index:1000001; top: 0%;left: 0%;width: 100%;height: 100%;
background-color: black; filter: alpha(opacity=50); cursor:pointer; opacity:0.5;
}

.fc-white_content {
opacity:1; display:none; margin-top: -320px; margin-left: -485px; width:970px; height:640px;
position:fixed; top:50%; left:50%; border: none;z-index:1000002;overflow: auto;
}

.fc-main-box{
opacity:1; display:none; margin:15px auto 0 auto; width:930px; position:relative; z-index:1000003;
}

.fc-widget_close{
opacity:1; content:url(http://i1338.photobucket.com/albums/o691/WeCause/X_zpse4a7e538.png);
position:absolute; z-index=1000004; right:-16px; top:-16px; display:block; cursor:pointer;
}

.floating_button{
display: block; margin-top: 0px; margin-left: 0px; width:auto ; height: auto;
position:fixed; z-index:999999; overflow: auto;
}

@keyframes backfadesin {
   from { opacity:0; }
   to {opacity:.5;}
}

@-moz-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@-webkit-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@-o-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}


@-ms-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; transform: translateY(20px);}
   100% {opacity: 1; transform: translateY(0);}
}

@-moz-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -moz-transform: translateY(20px);}
   100% {opacity: 1; -moz-transform: translateY(0);}
}

@-webkit-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -webkit-transform: translateY(20px);}
   100% {opacity: 1; -webkit-transform: translateY(0);}
}

@-o-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -o-transform: translateY(20px);}
   100% {opacity: 1; -o-transform: translateY(0);}
}

@-ms-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -ms-transform: translateY(20px);}
   100% {opacity: 1; -ms-transform: translateY(0);}
}

</style>

<script>

function open_window(cause_id) {
var  protocol=String(document.location.protocol);
var new_url;
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){
new_url="https://www.flipcause.com/widget/"+cause_id
window.open(new_url);
}

else {
document.getElementById("fc-fade").style.display = "block";
document.getElementById("fc-fade").style.webkitAnimation = "backfadesin 1s";
document.getElementById("fc-fade").style.animation = "backfadesin 1s";
document.getElementById("fc-fade").style.mozAnimation = "backfadesin 1s";
document.getElementById("fc-light").style.display = "block";
document.getElementById("fc-light").style.webkitAnimation = "fadesin 1.5s";
document.getElementById("fc-light").style.animation = "fadesin 1.5s";
document.getElementById("fc-light").style.mozAnimation = "fadesin 1.5s";
document.getElementById("fc-main").style.display = "block";
document.getElementById("fc-main").style.webkitAnimation = "fadesin 1.5s";
document.getElementById("fc-main").style.animation = "fadesin 1.5s";
document.getElementById("fc-main").style.mozAnimation = "fadesin 1.5s";
document.getElementById("fc-close").style.display = "block";
document.getElementById("fc-close").style.webkitAnimation = "fadesin 1.5s";
document.getElementById("fc-close").style.animation = "fadesin 1.5s";
document.getElementById("fc-close").style.mozAnimation = "fadesin 1.5s";
document.getElementById("fc-myFrame").style.display = "block";
document.getElementById("fc-myFrame").style.webkitAnimation = "fadesin 1.5s";
document.getElementById("fc-myFrame").style.animation = "fadesin 1.5s";
document.getElementById("fc-myFrame").style.mozAnimation = "fadesin 1.5s";
document.getElementById("fc-myFrame").src="https://www.flipcause.com/widget/"+cause_id;
}
}


function close_window() {
document.getElementById("fc-fade").style.display="none";
document.getElementById("fc-light").style.display="none";
document.getElementById("fc-main").style.display="none";
document.getElementById("fc-close").style.display="none";
document.getElementById("fc-myFrame").style.display="none";
}

</script>

<div id="fc-fade" class="fc-black_overlay" onclick="close_window()"></div>
<div id="fc-light" class="fc-white_content">
<div id="fc-main" class="fc-main-box">
<div id="fc-close" class="fc-widget_close" onclick="close_window()">
</div><iframe id="fc-myFrame" iframe height="580" width="925" style="border: 0;
border-radius:5px 5px 5px 5px; box-shadow:0 0 8px rgba(0, 0, 0, 0.5);" scrolling="no" src=""></iframe></div>
</div>

<!--END Flipcause Main Integration Code-->
</footer>
</html>