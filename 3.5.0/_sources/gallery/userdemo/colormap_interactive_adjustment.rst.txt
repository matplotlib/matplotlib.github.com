
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "gallery/userdemo/colormap_interactive_adjustment.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_gallery_userdemo_colormap_interactive_adjustment.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_gallery_userdemo_colormap_interactive_adjustment.py:


========================================
Interactive Adjustment of Colormap Range
========================================

Demonstration of using colorbar, picker, and event functionality to make an
interactively adjustable colorbar widget.

Left clicks and drags inside the colorbar axes adjust the high range of the
color scheme. Likewise, right clicks and drags adjust the low range. The
connected AxesImage immediately updates to reflect the change.

.. GENERATED FROM PYTHON SOURCE LINES 13-18

.. code-block:: default


    import numpy as np
    import matplotlib.pyplot as plt
    from matplotlib.backend_bases import MouseButton








.. GENERATED FROM PYTHON SOURCE LINES 19-20

Callback definitions

.. GENERATED FROM PYTHON SOURCE LINES 20-43

.. code-block:: default



    def on_pick(event):
        adjust_colorbar(event.mouseevent)


    def on_move(mouseevent):
        if mouseevent.inaxes is colorbar.ax:
            adjust_colorbar(mouseevent)


    def adjust_colorbar(mouseevent):
        if mouseevent.button == MouseButton.LEFT:
            colorbar.norm.vmax = max(mouseevent.ydata, colorbar.norm.vmin)
        elif mouseevent.button == MouseButton.RIGHT:
            colorbar.norm.vmin = min(mouseevent.ydata, colorbar.norm.vmax)
        else:
            # discard all others
            return

        canvas.draw_idle()









.. GENERATED FROM PYTHON SOURCE LINES 44-45

Generate figure with Axesimage and Colorbar

.. GENERATED FROM PYTHON SOURCE LINES 45-62

.. code-block:: default


    fig, ax = plt.subplots()
    canvas = fig.canvas

    delta = 0.1
    x = np.arange(-3.0, 4.001, delta)
    y = np.arange(-4.0, 3.001, delta)
    X, Y = np.meshgrid(x, y)
    Z1 = np.exp(-X**2 - Y**2)
    Z2 = np.exp(-(X - 1)**2 - (Y - 1)**2)
    Z = (0.9*Z1 - 0.5*Z2) * 2

    cmap = plt.colormaps['viridis'].with_extremes(
        over='xkcd:orange', under='xkcd:dark red')
    axesimage = plt.imshow(Z, cmap=cmap)
    colorbar = plt.colorbar(axesimage, ax=ax, use_gridspec=True)




.. image-sg:: /gallery/userdemo/images/sphx_glr_colormap_interactive_adjustment_001.png
   :alt: colormap interactive adjustment
   :srcset: /gallery/userdemo/images/sphx_glr_colormap_interactive_adjustment_001.png, /gallery/userdemo/images/sphx_glr_colormap_interactive_adjustment_001_2_0x.png 2.0x
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 63-65

Note that axesimage and colorbar share a Normalize object
so they will stay in sync

.. GENERATED FROM PYTHON SOURCE LINES 65-70

.. code-block:: default


    assert colorbar.norm is axesimage.norm
    colorbar.norm.vmax = 1.5
    axesimage.norm.vmin = -0.75








.. GENERATED FROM PYTHON SOURCE LINES 71-72

Hook Colorbar up to canvas events

.. GENERATED FROM PYTHON SOURCE LINES 72-85

.. code-block:: default


    # `set_navigate` helps you see what value you are about to set the range
    # to, and enables zoom and pan in the colorbar which can be helpful for
    # narrow or wide data ranges
    colorbar.ax.set_navigate(True)

    # React to all motion with left or right mouse buttons held
    canvas.mpl_connect("motion_notify_event", on_move)

    # React only to left and right clicks
    colorbar.ax.set_picker(True)
    canvas.mpl_connect("pick_event", on_pick)





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    6



.. GENERATED FROM PYTHON SOURCE LINES 86-89

Display

The colormap will now respond to left and right clicks in the Colorbar axes

.. GENERATED FROM PYTHON SOURCE LINES 89-91

.. code-block:: default


    plt.show()








.. _sphx_glr_download_gallery_userdemo_colormap_interactive_adjustment.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: colormap_interactive_adjustment.py <colormap_interactive_adjustment.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: colormap_interactive_adjustment.ipynb <colormap_interactive_adjustment.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    Keywords: matplotlib code example, codex, python plot, pyplot
    `Gallery generated by Sphinx-Gallery
    <https://sphinx-gallery.readthedocs.io>`_
