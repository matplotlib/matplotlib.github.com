
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Event handling and picking &#8212; Matplotlib 3.5.1 documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/style.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mpl.css?v3.5.1-2-g0b9384b0ff" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib 3.5.1 documentation"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Fonts in Matplotlib text engine" href="fonts.html" />
    <link rel="prev" title="Interactive figures and asynchronous programming" href="interactive_guide.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-55954603-1', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/logo2.svg" class="logo" alt="logo">
</a>      


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        
<ul id="navbar-main-elements" class="navbar-nav">
  <li class="nav-item">
    <a class="reference internal nav-link" href="../../plot_types/index.html">Plot types</a>
  </li>
  <li class="nav-item">
    <a class="reference internal nav-link" href="../../gallery/index.html">Examples</a>
  </li>
  <li class="nav-item">
    <a class="reference internal nav-link" href="../../tutorials/index.html">Tutorials</a>
  </li>
  <li class="nav-item">
    <a class="reference internal nav-link" href="../../api/index.html">Reference</a>
  </li>
  <li class="nav-item">
    <a class="reference internal nav-link" href="../index.html">User guide</a>
  </li>
  <li class="nav-item">
    <a class="reference internal nav-link" href="../../devel/index.html">Develop</a>
  </li>
  <li class="nav-item">
    <a class="reference internal nav-link" href="../release_notes.html">Release notes</a>
  </li>
</ul>

      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        
      <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://gitter.im/matplotlib" rel="noopener" target="_blank" title="gitter">
            <span><i class="fab fa-gitter"></i></span>
            <label class="sr-only">gitter</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://discourse.matplotlib.org" rel="noopener" target="_blank" title="discourse">
            <span><i class="fab fa-discourse"></i></span>
            <label class="sr-only">discourse</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/matplotlib/matplotlib" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/matplotlib/" rel="noopener" target="_blank" title="twitter">
            <span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">twitter</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="backends.html">
   Backends
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="interactive.html">
   Interactive figures
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="interactive_guide.html">
     Interactive figures and asynchronous programming
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Event handling and picking
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="fonts.html">
   Fonts in Matplotlib text engine
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Event handling and picking
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="performance.html">
   Performance
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="interactive_guide.html">
   Interactive figures and asynchronous programming
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#event-connections">
   Event connections
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#event-attributes">
   Event attributes
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#draggable-rectangle-exercise">
     Draggable rectangle exercise
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mouse-enter-and-leave">
   Mouse enter and leave
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#object-picking">
   Object picking
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#simple-picking-example">
     Simple picking example
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#picking-exercise">
     Picking exercise
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="event-handling-and-picking">
<span id="event-handling-tutorial"></span><h1>Event handling and picking<a class="headerlink" href="#event-handling-and-picking" title="Permalink to this headline">¶</a></h1>
<p>Matplotlib works with a number of user interface toolkits (wxpython,
tkinter, qt, gtk, and macosx) and in order to support features like
interactive panning and zooming of figures, it is helpful to the
developers to have an API for interacting with the figure via key
presses and mouse movements that is &quot;GUI neutral&quot; so we don't have to
repeat a lot of code across the different user interfaces.  Although
the event handling API is GUI neutral, it is based on the GTK model,
which was the first user interface Matplotlib supported.  The events
that are triggered are also a bit richer vis-a-vis Matplotlib than
standard GUI events, including information like which
<a class="reference internal" href="../../api/axes_api.html#matplotlib.axes.Axes" title="matplotlib.axes.Axes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> the event occurred in.  The events also
understand the Matplotlib coordinate system, and report event
locations in both pixel and data coordinates.</p>
<section id="event-connections">
<span id="id1"></span><h2>Event connections<a class="headerlink" href="#event-connections" title="Permalink to this headline">¶</a></h2>
<p>To receive events, you need to write a callback function and then
connect your function to the event manager, which is part of the
<a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.FigureCanvasBase" title="matplotlib.backend_bases.FigureCanvasBase"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FigureCanvasBase</span></code></a>.  Here is a simple
example that prints the location of the mouse click and which button
was pressed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">onclick</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> click: button=</span><span class="si">%d</span><span class="s1">, x=</span><span class="si">%d</span><span class="s1">, y=</span><span class="si">%d</span><span class="s1">, xdata=</span><span class="si">%f</span><span class="s1">, ydata=</span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span>
          <span class="p">(</span><span class="s1">&#39;double&#39;</span> <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">dblclick</span> <span class="k">else</span> <span class="s1">&#39;single&#39;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">,</span>
           <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">))</span>

<span class="n">cid</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;button_press_event&#39;</span><span class="p">,</span> <span class="n">onclick</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.FigureCanvasBase.mpl_connect" title="matplotlib.backend_bases.FigureCanvasBase.mpl_connect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FigureCanvasBase.mpl_connect</span></code></a> method returns a connection id (an
integer), which can be used to disconnect the callback via</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The canvas retains only weak references to instance methods used as
callbacks.  Therefore, you need to retain a reference to instances owning
such methods.  Otherwise the instance will be garbage-collected and the
callback will vanish.</p>
<p>This does not affect free functions used as callbacks.</p>
</div>
<p>Here are the events that you can connect to, the class instances that
are sent back to you when the event occurs, and the event descriptions:</p>
<table class="table">
<colgroup>
<col style="width: 29%" />
<col style="width: 21%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Event name</p></th>
<th class="head"><p>Class</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>'button_press_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.MouseEvent" title="matplotlib.backend_bases.MouseEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MouseEvent</span></code></a></p></td>
<td><p>mouse button is pressed</p></td>
</tr>
<tr class="row-odd"><td><p>'button_release_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.MouseEvent" title="matplotlib.backend_bases.MouseEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MouseEvent</span></code></a></p></td>
<td><p>mouse button is released</p></td>
</tr>
<tr class="row-even"><td><p>'close_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.CloseEvent" title="matplotlib.backend_bases.CloseEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CloseEvent</span></code></a></p></td>
<td><p>figure is closed</p></td>
</tr>
<tr class="row-odd"><td><p>'draw_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.DrawEvent" title="matplotlib.backend_bases.DrawEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DrawEvent</span></code></a></p></td>
<td><p>canvas has been drawn (but screen
widget not updated yet)</p></td>
</tr>
<tr class="row-even"><td><p>'key_press_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.KeyEvent" title="matplotlib.backend_bases.KeyEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">KeyEvent</span></code></a></p></td>
<td><p>key is pressed</p></td>
</tr>
<tr class="row-odd"><td><p>'key_release_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.KeyEvent" title="matplotlib.backend_bases.KeyEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">KeyEvent</span></code></a></p></td>
<td><p>key is released</p></td>
</tr>
<tr class="row-even"><td><p>'motion_notify_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.MouseEvent" title="matplotlib.backend_bases.MouseEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MouseEvent</span></code></a></p></td>
<td><p>mouse moves</p></td>
</tr>
<tr class="row-odd"><td><p>'pick_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.PickEvent" title="matplotlib.backend_bases.PickEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PickEvent</span></code></a></p></td>
<td><p>artist in the canvas is selected</p></td>
</tr>
<tr class="row-even"><td><p>'resize_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.ResizeEvent" title="matplotlib.backend_bases.ResizeEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ResizeEvent</span></code></a></p></td>
<td><p>figure canvas is resized</p></td>
</tr>
<tr class="row-odd"><td><p>'scroll_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.MouseEvent" title="matplotlib.backend_bases.MouseEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MouseEvent</span></code></a></p></td>
<td><p>mouse scroll wheel is rolled</p></td>
</tr>
<tr class="row-even"><td><p>'figure_enter_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.LocationEvent" title="matplotlib.backend_bases.LocationEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LocationEvent</span></code></a></p></td>
<td><p>mouse enters a new figure</p></td>
</tr>
<tr class="row-odd"><td><p>'figure_leave_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.LocationEvent" title="matplotlib.backend_bases.LocationEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LocationEvent</span></code></a></p></td>
<td><p>mouse leaves a figure</p></td>
</tr>
<tr class="row-even"><td><p>'axes_enter_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.LocationEvent" title="matplotlib.backend_bases.LocationEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LocationEvent</span></code></a></p></td>
<td><p>mouse enters a new axes</p></td>
</tr>
<tr class="row-odd"><td><p>'axes_leave_event'</p></td>
<td><p><a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.LocationEvent" title="matplotlib.backend_bases.LocationEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LocationEvent</span></code></a></p></td>
<td><p>mouse leaves an axes</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When connecting to 'key_press_event' and 'key_release_event' events,
you may encounter inconsistencies between the different user interface
toolkits that Matplotlib works with. This is due to inconsistencies/limitations
of the user interface toolkit. The following table shows some basic examples of
what you may expect to receive as key(s) from the different user interface toolkits,
where a comma separates different keys:</p>
<table class="table">
<colgroup>
<col style="width: 9%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key(s) Pressed</p></th>
<th class="head"><p>WxPython</p></th>
<th class="head"><p>Qt</p></th>
<th class="head"><p>WebAgg</p></th>
<th class="head"><p>Gtk</p></th>
<th class="head"><p>Tkinter</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Shift+2</p></td>
<td><p>shift, shift+2</p></td>
<td><p>shift, &quot;</p></td>
<td><p>shift, &quot;</p></td>
<td><p>shift, &quot;</p></td>
<td><p>shift, &quot;</p></td>
</tr>
<tr class="row-odd"><td><p>Shift+F1</p></td>
<td><p>shift, shift+f1</p></td>
<td><p>shift, shift+f1</p></td>
<td><p>shift, shift+f1</p></td>
<td><p>shift, shift+f1</p></td>
<td><p>shift, shift+f1</p></td>
</tr>
<tr class="row-even"><td><p>Shift</p></td>
<td><p>shift</p></td>
<td><p>shift</p></td>
<td><p>shift</p></td>
<td><p>shift</p></td>
<td><p>shift</p></td>
</tr>
<tr class="row-odd"><td><p>Control</p></td>
<td><p>control</p></td>
<td><p>control</p></td>
<td><p>control</p></td>
<td><p>control</p></td>
<td><p>control</p></td>
</tr>
<tr class="row-even"><td><p>Alt</p></td>
<td><p>alt</p></td>
<td><p>alt</p></td>
<td><p>alt</p></td>
<td><p>alt</p></td>
<td><p>alt</p></td>
</tr>
<tr class="row-odd"><td><p>AltGr</p></td>
<td><p>Nothing</p></td>
<td><p>Nothing</p></td>
<td><p>alt</p></td>
<td><p>iso_level3_shift</p></td>
<td><p>iso_level3_shift</p></td>
</tr>
<tr class="row-even"><td><p>CapsLock</p></td>
<td><p>caps_lock</p></td>
<td><p>caps_lock</p></td>
<td><p>caps_lock</p></td>
<td><p>caps_lock</p></td>
<td><p>caps_lock</p></td>
</tr>
<tr class="row-odd"><td><p>A</p></td>
<td><p>a</p></td>
<td><p>a</p></td>
<td><p>A</p></td>
<td><p>A</p></td>
<td><p>A</p></td>
</tr>
<tr class="row-even"><td><p>a</p></td>
<td><p>a</p></td>
<td><p>a</p></td>
<td><p>a</p></td>
<td><p>a</p></td>
<td><p>a</p></td>
</tr>
<tr class="row-odd"><td><p>Shift+a</p></td>
<td><p>shift, A</p></td>
<td><p>shift, A</p></td>
<td><p>shift, A</p></td>
<td><p>shift, A</p></td>
<td><p>shift, A</p></td>
</tr>
<tr class="row-even"><td><p>Shift+A</p></td>
<td><p>shift, A</p></td>
<td><p>shift, A</p></td>
<td><p>shift, a</p></td>
<td><p>shift, a</p></td>
<td><p>shift, a</p></td>
</tr>
<tr class="row-odd"><td><p>Ctrl+Shift+Alt</p></td>
<td><p>control, ctrl+shift, ctrl+alt</p></td>
<td><p>control, ctrl+shift, ctrl+meta</p></td>
<td><p>control, ctrl+shift, ctrl+meta</p></td>
<td><p>control, ctrl+shift, ctrl+meta</p></td>
<td><p>control, ctrl+shift, ctrl+meta</p></td>
</tr>
<tr class="row-even"><td><p>Ctrl+Shift+a</p></td>
<td><p>control, ctrl+shift, ctrl+A</p></td>
<td><p>control, ctrl+shift, ctrl+A</p></td>
<td><p>control, ctrl+shift, ctrl+A</p></td>
<td><p>control, ctrl+shift, ctrl+A</p></td>
<td><p>control, ctrl+shift, ctrl+a</p></td>
</tr>
<tr class="row-odd"><td><p>Ctrl+Shift+A</p></td>
<td><p>control, ctrl+shift, ctrl+A</p></td>
<td><p>control, ctrl+shift, ctrl+A</p></td>
<td><p>control, ctrl+shift, ctrl+a</p></td>
<td><p>control, ctrl+shift, ctrl+a</p></td>
<td><p>control, ctrl+shift, ctrl+a</p></td>
</tr>
<tr class="row-even"><td><p>F1</p></td>
<td><p>f1</p></td>
<td><p>f1</p></td>
<td><p>f1</p></td>
<td><p>f1</p></td>
<td><p>f1</p></td>
</tr>
<tr class="row-odd"><td><p>Ctrl+F1</p></td>
<td><p>control, ctrl+f1</p></td>
<td><p>control, ctrl+f1</p></td>
<td><p>control, ctrl+f1</p></td>
<td><p>control, ctrl+f1</p></td>
<td><p>control, ctrl+f1</p></td>
</tr>
</tbody>
</table>
</div>
<p>Matplotlib attaches some keypress callbacks by default for interactivity; they
are documented in the <a class="reference internal" href="interactive.html#key-event-handling"><span class="std std-ref">Navigation keyboard shortcuts</span></a> section.</p>
</section>
<section id="event-attributes">
<span id="id2"></span><h2>Event attributes<a class="headerlink" href="#event-attributes" title="Permalink to this headline">¶</a></h2>
<p>All Matplotlib events inherit from the base class
<a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.Event" title="matplotlib.backend_bases.Event"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib.backend_bases.Event</span></code></a>, which stores the attributes:</p>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>the event name</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">canvas</span></code></dt><dd><p>the FigureCanvas instance generating the event</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">guiEvent</span></code></dt><dd><p>the GUI event that triggered the Matplotlib event</p>
</dd>
</dl>
</div></blockquote>
<p>The most common events that are the bread and butter of event handling
are key press/release events and mouse press/release and movement
events.  The <a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.KeyEvent" title="matplotlib.backend_bases.KeyEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">KeyEvent</span></code></a> and <a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.MouseEvent" title="matplotlib.backend_bases.MouseEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MouseEvent</span></code></a> classes that handle
these events are both derived from the LocationEvent, which has the
following attributes</p>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code></dt><dd><p>mouse x and y position in pixels from left and bottom of canvas</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">inaxes</span></code></dt><dd><p>the <a class="reference internal" href="../../api/axes_api.html#matplotlib.axes.Axes" title="matplotlib.axes.Axes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> instance over which the mouse is, if any; else None</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xdata</span></code>, <code class="docutils literal notranslate"><span class="pre">ydata</span></code></dt><dd><p>mouse x and y position in data coordinates, if the mouse is over an
axes</p>
</dd>
</dl>
</div></blockquote>
<p>Let's look a simple example of a canvas, where a simple line segment
is created every time a mouse is pressed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="k">class</span> <span class="nc">LineBuilder</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">line</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">get_xdata</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">get_ydata</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cid</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;button_press_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="o">!=</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span> <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ys</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;click to build line segments&#39;</span><span class="p">)</span>
<span class="n">line</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># empty line</span>
<span class="n">linebuilder</span> <span class="o">=</span> <span class="n">LineBuilder</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.MouseEvent" title="matplotlib.backend_bases.MouseEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MouseEvent</span></code></a> that we just used is a <a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.LocationEvent" title="matplotlib.backend_bases.LocationEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LocationEvent</span></code></a>, so we have access to
the data and pixel coordinates via <code class="docutils literal notranslate"><span class="pre">(event.x,</span> <span class="pre">event.y)</span></code> and <code class="docutils literal notranslate"><span class="pre">(event.xdata,</span>
<span class="pre">event.ydata)</span></code>.  In addition to the <code class="docutils literal notranslate"><span class="pre">LocationEvent</span></code> attributes, it also has</p>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">button</span></code></dt><dd><p>the button pressed: None, <a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.MouseButton" title="matplotlib.backend_bases.MouseButton"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MouseButton</span></code></a>, 'up', or 'down' (up and down are used for scroll events)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">key</span></code></dt><dd><p>the key pressed: None, any character, 'shift', 'win', or 'control'</p>
</dd>
</dl>
</div></blockquote>
<section id="draggable-rectangle-exercise">
<h3>Draggable rectangle exercise<a class="headerlink" href="#draggable-rectangle-exercise" title="Permalink to this headline">¶</a></h3>
<p>Write draggable rectangle class that is initialized with a
<a class="reference internal" href="../../api/_as_gen/matplotlib.patches.Rectangle.html#matplotlib.patches.Rectangle" title="matplotlib.patches.Rectangle"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Rectangle</span></code></a> instance but will move its <code class="docutils literal notranslate"><span class="pre">xy</span></code>
location when dragged.  Hint: you will need to store the original
<code class="docutils literal notranslate"><span class="pre">xy</span></code> location of the rectangle which is stored as rect.xy and
connect to the press, motion and release mouse events.  When the mouse
is pressed, check to see if the click occurs over your rectangle (see
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Rectangle.contains</span></code>) and if it does, store
the rectangle xy and the location of the mouse click in data coords.
In the motion event callback, compute the deltax and deltay of the
mouse movement, and add those deltas to the origin of the rectangle
you stored.  The redraw the figure.  On the button release event, just
reset all the button press data you stored as None.</p>
<p>Here is the solution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="k">class</span> <span class="nc">DraggableRectangle</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rect</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span> <span class="o">=</span> <span class="n">rect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">press</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Connect to all the events we need.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cidpress</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span>
            <span class="s1">&#39;button_press_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_press</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cidrelease</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span>
            <span class="s1">&#39;button_release_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_release</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cidmotion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span>
            <span class="s1">&#39;motion_notify_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_motion</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check whether mouse is over us; if so, store some data.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">contains</span><span class="p">,</span> <span class="n">attrd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">contains</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;event contains&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">xy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">press</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">xy</span><span class="p">,</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Move the rectangle if the mouse is over us.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">press</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">),</span> <span class="p">(</span><span class="n">xpress</span><span class="p">,</span> <span class="n">ypress</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">press</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span> <span class="o">-</span> <span class="n">xpress</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span> <span class="o">-</span> <span class="n">ypress</span>
        <span class="c1"># print(f&#39;x0={x0}, xpress={xpress}, event.xdata={event.xdata}, &#39;</span>
        <span class="c1">#       f&#39;dx={dx}, x0+dx={x0+dx}&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">set_x</span><span class="p">(</span><span class="n">x0</span><span class="o">+</span><span class="n">dx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">set_y</span><span class="p">(</span><span class="n">y0</span><span class="o">+</span><span class="n">dy</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear button press information.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">press</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disconnect all callbacks.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cidpress</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cidrelease</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cidmotion</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">rects</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">20</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="n">drs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">rects</span><span class="p">:</span>
    <span class="n">dr</span> <span class="o">=</span> <span class="n">DraggableRectangle</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
    <span class="n">dr</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">drs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dr</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Extra credit</strong>: Use blitting to make the animated drawing faster and
smoother.</p>
<p>Extra credit solution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Draggable rectangle with blitting.</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="k">class</span> <span class="nc">DraggableRectangle</span><span class="p">:</span>
    <span class="n">lock</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># only one can be animated at a time</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rect</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span> <span class="o">=</span> <span class="n">rect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">press</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Connect to all the events we need.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cidpress</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span>
            <span class="s1">&#39;button_press_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_press</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cidrelease</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span>
            <span class="s1">&#39;button_release_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_release</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cidmotion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span>
            <span class="s1">&#39;motion_notify_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_motion</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check whether mouse is over us; if so, store some data.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">axes</span>
                <span class="ow">or</span> <span class="n">DraggableRectangle</span><span class="o">.</span><span class="n">lock</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="n">contains</span><span class="p">,</span> <span class="n">attrd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">contains</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;event contains&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">xy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">press</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">xy</span><span class="p">,</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">)</span>
        <span class="n">DraggableRectangle</span><span class="o">.</span><span class="n">lock</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="c1"># draw everything but the selected rectangle and store the pixel buffer</span>
        <span class="n">canvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">set_animated</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">copy_from_bbox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>

        <span class="c1"># now redraw just the rectangle</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">draw_artist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">)</span>

        <span class="c1"># and blit just the redrawn area</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Move the rectangle if the mouse is over us.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">inaxes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">axes</span>
                <span class="ow">or</span> <span class="n">DraggableRectangle</span><span class="o">.</span><span class="n">lock</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">),</span> <span class="p">(</span><span class="n">xpress</span><span class="p">,</span> <span class="n">ypress</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">press</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span> <span class="o">-</span> <span class="n">xpress</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span> <span class="o">-</span> <span class="n">ypress</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">set_x</span><span class="p">(</span><span class="n">x0</span><span class="o">+</span><span class="n">dx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">set_y</span><span class="p">(</span><span class="n">y0</span><span class="o">+</span><span class="n">dy</span><span class="p">)</span>

        <span class="n">canvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">axes</span>
        <span class="c1"># restore the background region</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">restore_region</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="p">)</span>

        <span class="c1"># redraw just the current rectangle</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">draw_artist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="p">)</span>

        <span class="c1"># blit just the redrawn area</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">bbox</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear button press information.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">DraggableRectangle</span><span class="o">.</span><span class="n">lock</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">press</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">DraggableRectangle</span><span class="o">.</span><span class="n">lock</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># turn off the rect animation property and reset the background</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">set_animated</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># redraw the full figure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disconnect all callbacks.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cidpress</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cidrelease</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cidmotion</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">rects</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="mi">20</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="n">drs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">rects</span><span class="p">:</span>
    <span class="n">dr</span> <span class="o">=</span> <span class="n">DraggableRectangle</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
    <span class="n">dr</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">drs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dr</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="mouse-enter-and-leave">
<span id="enter-leave-events"></span><h2>Mouse enter and leave<a class="headerlink" href="#mouse-enter-and-leave" title="Permalink to this headline">¶</a></h2>
<p>If you want to be notified when the mouse enters or leaves a figure or
axes, you can connect to the figure/axes enter/leave events.  Here is
a simple example that changes the colors of the axes and figure
background that the mouse is over:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Illustrate the figure and axes enter and leave events by changing the</span>
<span class="sd">frame colors on enter and leave</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="k">def</span> <span class="nf">enter_axes</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;enter_axes&#39;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="p">)</span>
    <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
    <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">leave_axes</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;leave_axes&#39;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="p">)</span>
    <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
    <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">enter_figure</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;enter_figure&#39;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
    <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
    <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">leave_figure</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;leave_figure&#39;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="p">)</span>
    <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="s1">&#39;grey&#39;</span><span class="p">)</span>
    <span class="n">event</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<span class="n">fig1</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">fig1</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;mouse hover over figure or axes to trigger events&#39;</span><span class="p">)</span>

<span class="n">fig1</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;figure_enter_event&#39;</span><span class="p">,</span> <span class="n">enter_figure</span><span class="p">)</span>
<span class="n">fig1</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;figure_leave_event&#39;</span><span class="p">,</span> <span class="n">leave_figure</span><span class="p">)</span>
<span class="n">fig1</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;axes_enter_event&#39;</span><span class="p">,</span> <span class="n">enter_axes</span><span class="p">)</span>
<span class="n">fig1</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;axes_leave_event&#39;</span><span class="p">,</span> <span class="n">leave_axes</span><span class="p">)</span>

<span class="n">fig2</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">fig2</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;mouse hover over figure or axes to trigger events&#39;</span><span class="p">)</span>

<span class="n">fig2</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;figure_enter_event&#39;</span><span class="p">,</span> <span class="n">enter_figure</span><span class="p">)</span>
<span class="n">fig2</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;figure_leave_event&#39;</span><span class="p">,</span> <span class="n">leave_figure</span><span class="p">)</span>
<span class="n">fig2</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;axes_enter_event&#39;</span><span class="p">,</span> <span class="n">enter_axes</span><span class="p">)</span>
<span class="n">fig2</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;axes_leave_event&#39;</span><span class="p">,</span> <span class="n">leave_axes</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="object-picking">
<span id="id3"></span><h2>Object picking<a class="headerlink" href="#object-picking" title="Permalink to this headline">¶</a></h2>
<p>You can enable picking by setting the <code class="docutils literal notranslate"><span class="pre">picker</span></code> property of an <a class="reference internal" href="../../api/artist_api.html#matplotlib.artist.Artist" title="matplotlib.artist.Artist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Artist</span></code></a> (such
as <a class="reference internal" href="../../api/_as_gen/matplotlib.lines.Line2D.html#matplotlib.lines.Line2D" title="matplotlib.lines.Line2D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Line2D</span></code></a>, <a class="reference internal" href="../../api/text_api.html#matplotlib.text.Text" title="matplotlib.text.Text"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Text</span></code></a>, <a class="reference internal" href="../../api/_as_gen/matplotlib.patches.Patch.html#matplotlib.patches.Patch" title="matplotlib.patches.Patch"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Patch</span></code></a>, <a class="reference internal" href="../../api/_as_gen/matplotlib.patches.Polygon.html#matplotlib.patches.Polygon" title="matplotlib.patches.Polygon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Polygon</span></code></a>, <a class="reference internal" href="../../api/image_api.html#matplotlib.image.AxesImage" title="matplotlib.image.AxesImage"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AxesImage</span></code></a>, etc.)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">picker</span></code> property can be set using various types:</p>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">None</span></code></dt><dd><p>Picking is disabled for this artist (default).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">boolean</span></code></dt><dd><p>If True, then picking will be enabled and the artist will fire a
pick event if the mouse event is over the artist.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">callable</span></code></dt><dd><p>If picker is a callable, it is a user supplied function which
determines whether the artist is hit by the mouse event.  The
signature is <code class="docutils literal notranslate"><span class="pre">hit,</span> <span class="pre">props</span> <span class="pre">=</span> <span class="pre">picker(artist,</span> <span class="pre">mouseevent)</span></code> to
determine the hit test.  If the mouse event is over the artist,
return <code class="docutils literal notranslate"><span class="pre">hit</span> <span class="pre">=</span> <span class="pre">True</span></code>; <code class="docutils literal notranslate"><span class="pre">props</span></code> is a dictionary of properties that
become additional attributes on the <a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.PickEvent" title="matplotlib.backend_bases.PickEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PickEvent</span></code></a>.</p>
</dd>
</dl>
</div></blockquote>
<p>The artist's <code class="docutils literal notranslate"><span class="pre">pickradius</span></code> property can additionally be set to a tolerance
value in points (there are 72 points per inch) that determines how far the
mouse can be and still trigger a mouse event.</p>
<p>After you have enabled an artist for picking by setting the <code class="docutils literal notranslate"><span class="pre">picker</span></code>
property, you need to connect a handler to the figure canvas pick_event to get
pick callbacks on mouse press events.  The handler typically looks like</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pick_handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="n">mouseevent</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">mouseevent</span>
    <span class="n">artist</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">artist</span>
    <span class="c1"># now do something with this...</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.PickEvent" title="matplotlib.backend_bases.PickEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PickEvent</span></code></a> passed to your callback always has the following attributes:</p>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">mouseevent</span></code></dt><dd><p>The <a class="reference internal" href="../../api/backend_bases_api.html#matplotlib.backend_bases.MouseEvent" title="matplotlib.backend_bases.MouseEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MouseEvent</span></code></a> that generate the pick event.  See <a class="reference internal" href="#event-attributes">event-attributes</a>
for a list of useful attributes on the mouse event.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">artist</span></code></dt><dd><p>The <a class="reference internal" href="../../api/artist_api.html#matplotlib.artist.Artist" title="matplotlib.artist.Artist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Artist</span></code></a> that generated the pick event.</p>
</dd>
</dl>
</div></blockquote>
<p>Additionally, certain artists like <a class="reference internal" href="../../api/_as_gen/matplotlib.lines.Line2D.html#matplotlib.lines.Line2D" title="matplotlib.lines.Line2D"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Line2D</span></code></a> and <a class="reference internal" href="../../api/collections_api.html#matplotlib.collections.PatchCollection" title="matplotlib.collections.PatchCollection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PatchCollection</span></code></a> may attach
additional metadata, like the indices of the data that meet the
picker criteria (e.g., all the points in the line that are within the
specified <code class="docutils literal notranslate"><span class="pre">pickradius</span></code> tolerance).</p>
<section id="simple-picking-example">
<h3>Simple picking example<a class="headerlink" href="#simple-picking-example" title="Permalink to this headline">¶</a></h3>
<p>In the example below, we enable picking on the line and set a pick radius
tolerance in points.  The <code class="docutils literal notranslate"><span class="pre">onpick</span></code>
callback function will be called when the pick event it within the
tolerance distance from the line, and has the indices of the data
vertices that are within the pick distance tolerance.  Our <code class="docutils literal notranslate"><span class="pre">onpick</span></code>
callback function simply prints the data that are under the pick
location.  Different Matplotlib Artists can attach different data to
the PickEvent.  For example, <code class="docutils literal notranslate"><span class="pre">Line2D</span></code> attaches the ind property,
which are the indices into the line data under the pick point.  See
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Line2D.pick</span></code> for details on the <code class="docutils literal notranslate"><span class="pre">PickEvent</span></code> properties of the line.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;click on points&#39;</span><span class="p">)</span>

<span class="n">line</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span>
                <span class="n">picker</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pickradius</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># 5 points tolerance</span>

<span class="k">def</span> <span class="nf">onpick</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="n">thisline</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">artist</span>
    <span class="n">xdata</span> <span class="o">=</span> <span class="n">thisline</span><span class="o">.</span><span class="n">get_xdata</span><span class="p">()</span>
    <span class="n">ydata</span> <span class="o">=</span> <span class="n">thisline</span><span class="o">.</span><span class="n">get_ydata</span><span class="p">()</span>
    <span class="n">ind</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">ind</span>
    <span class="n">points</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">xdata</span><span class="p">[</span><span class="n">ind</span><span class="p">],</span> <span class="n">ydata</span><span class="p">[</span><span class="n">ind</span><span class="p">]))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;onpick points:&#39;</span><span class="p">,</span> <span class="n">points</span><span class="p">)</span>

<span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;pick_event&#39;</span><span class="p">,</span> <span class="n">onpick</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="picking-exercise">
<h3>Picking exercise<a class="headerlink" href="#picking-exercise" title="Permalink to this headline">¶</a></h3>
<p>Create a data set of 100 arrays of 1000 Gaussian random numbers and
compute the sample mean and standard deviation of each of them (hint:
NumPy arrays have a mean and std method) and make a xy marker plot of
the 100 means vs. the 100 standard deviations.  Connect the line
created by the plot command to the pick event, and plot the original
time series of the data that generated the clicked on points.  If more
than one point is within the tolerance of the clicked on point, you
can use multiple subplots to plot the multiple time series.</p>
<p>Exercise solution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Compute the mean and stddev of 100 data sets and plot mean vs. stddev.</span>
<span class="sd">When you click on one of the (mean, stddev) points, plot the raw dataset</span>
<span class="sd">that generated that point.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;click on point to plot time series&#39;</span><span class="p">)</span>
<span class="n">line</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">picker</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pickradius</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># 5 points tolerance</span>


<span class="k">def</span> <span class="nf">onpick</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">artist</span> <span class="o">!=</span> <span class="n">line</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">ind</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">squeeze</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">dataind</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">ind</span><span class="p">,</span> <span class="n">axs</span><span class="o">.</span><span class="n">flat</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">dataind</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;$</span><span class="se">\\</span><span class="s2">mu$=</span><span class="si">{</span><span class="n">xs</span><span class="p">[</span><span class="n">dataind</span><span class="p">]</span><span class="si">:</span><span class="s2">1.3f</span><span class="si">}</span><span class="se">\n</span><span class="s2">$</span><span class="se">\\</span><span class="s2">sigma$=</span><span class="si">{</span><span class="n">ys</span><span class="p">[</span><span class="n">dataind</span><span class="p">]</span><span class="si">:</span><span class="s2">1.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span>


<span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;pick_event&#39;</span><span class="p">,</span> <span class="n">onpick</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
</section>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the Matplotlib development team; 2012 - 2021 The Matplotlib development team.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>