<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MEP25: Serialization &mdash; Matplotlib 1.5.3 documentation</title>
    
    <link rel="stylesheet" href="../../_static/mpl.css"
type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css"
type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.5.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Matplotlib 1.5.3 documentation"
          href="../../_static/opensearch.xml"/>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Matplotlib 1.5.3 documentation" href="../../index.html" />
    <link rel="up" title="Matplotlib Enhancement Proposals" href="index.html" />
    <link rel="next" title="MEP26: Artist styling" href="MEP26.html" />
    <link rel="prev" title="MEP24: negative radius in polar plots" href="MEP24.html" /> 


  </head>
  <body>
    <div class="alert" style="background-color: #FEA46C; padding: 10px 0;
">
<h3>We're updating the default styles for Matplotlib 2.0</h3>

<p>Learn what to expect in the <a href="../../style_changes.html"
style="font-weight: bold;
color: #11557C;">new updates</a></p>

</div>



<!-- The "Fork me on github" ribbon -->
<img style="float: right; margin-bottom: -40px; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" usemap="#ribbonmap"/>
<map name="ribbonmap">
    <area shape="poly" coords="15,0,148,-1,148,135" href="https://github.com/matplotlib/matplotlib" title="Fork me on GitHub" />
</map>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../../index.html"><img src="../../_static/logo2.svg" width="540px" border="0" alt="matplotlib"/></a>
</div>




    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="MEP26.html" title="MEP26: Artist styling"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="MEP24.html" title="MEP24: negative radius in polar plots"
             accesskey="P">previous</a> |</li>

        <li><a href="../../index.html">home</a>|&nbsp;</li>
        <li><a href="../../examples/index.html">examples</a>|&nbsp;</li>
        <li><a href="../../gallery.html">gallery</a>|&nbsp;</li>
        <li><a href="../../api/pyplot_summary.html">pyplot</a>|&nbsp;</li>
        <li><a href="../../contents.html">docs</a> &raquo;</li>
          <li><a href="../index.html" >The Matplotlib Developers&#8217; Guide</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Matplotlib Enhancement Proposals</a> &raquo;</li> 
      </ul>
    </div>

  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<a href="http://depsy.org/package/python/matplotlib">
  <img src="http://depsy.org/api/package/pypi/matplotlib/badge.svg">
</a>

<br/>

Travis-CI: <a href="https://travis-ci.org/matplotlib/matplotlib">
  <img src="https://travis-ci.org/matplotlib/matplotlib.svg?branch=master"/>
</a>
<br/>
  <h3><a href="../../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">MEP25: Serialization</a><ul>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#branches-and-pull-requests">Branches and Pull requests</a></li>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#detailed-description">Detailed description</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#backward-compatibility">Backward compatibility</a></li>
<li><a class="reference internal" href="#alternatives">Alternatives</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../contents.html">Documentation overview</a><ul>
  <li><a href="../index.html">The Matplotlib Developers&#8217; Guide</a><ul>
  <li><a href="index.html">Matplotlib Enhancement Proposals</a><ul>
      <li>Previous: <a href="MEP24.html" title="previous chapter">MEP24: negative radius in polar plots</a></li>
      <li>Next: <a href="MEP26.html" title="next chapter">MEP26: Artist styling</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/devel/MEP/MEP25.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="mep25-serialization">
<h1>MEP25: Serialization<a class="headerlink" href="#mep25-serialization" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#status" id="id1">Status</a></li>
<li><a class="reference internal" href="#branches-and-pull-requests" id="id2">Branches and Pull requests</a></li>
<li><a class="reference internal" href="#abstract" id="id3">Abstract</a></li>
<li><a class="reference internal" href="#detailed-description" id="id4">Detailed description</a></li>
<li><a class="reference internal" href="#examples" id="id5">Examples</a></li>
<li><a class="reference internal" href="#implementation" id="id6">Implementation</a></li>
<li><a class="reference internal" href="#backward-compatibility" id="id7">Backward compatibility</a></li>
<li><a class="reference internal" href="#alternatives" id="id8">Alternatives</a></li>
</ul>
</div>
<div class="section" id="status">
<h2><a class="toc-backref" href="#id1">Status</a><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h2>
<p><strong>Discussion</strong></p>
</div>
<div class="section" id="branches-and-pull-requests">
<h2><a class="toc-backref" href="#id2">Branches and Pull requests</a><a class="headerlink" href="#branches-and-pull-requests" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>development branches:</li>
<li>related pull requests:</li>
</ul>
</div>
<div class="section" id="abstract">
<h2><a class="toc-backref" href="#id3">Abstract</a><a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
<p>This MEP aims at adding a serializable <code class="docutils literal"><span class="pre">Controller</span></code> objects to act
as an <code class="docutils literal"><span class="pre">Artist</span></code> managers. Users would then communicate changes to an
<code class="docutils literal"><span class="pre">Artist</span></code> via a <code class="docutils literal"><span class="pre">Controller</span></code>. In this way, functionality of the
<code class="docutils literal"><span class="pre">Controller</span></code> objects may be added incrementally since each
<code class="docutils literal"><span class="pre">Artist</span></code> is still responsible for drawing everything. The goal is to
create an API that is usable both by graphing libraries requiring
high-level descriptions of figures and libraries requiring low-level
interpretations.</p>
</div>
<div class="section" id="detailed-description">
<h2><a class="toc-backref" href="#id4">Detailed description</a><a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h2>
<p>Matplotlib is a core plotting engine with an API that many users
already understand. It&#8217;s difficult/impossible for other graphing
libraries to (1) get a complete figure description, (2) output raw
data from the figure object as the user has provided it, (3)
understand the semantics of the figure objects without heuristics,
and (4) give matplotlib a complete figure description to visualize. In
addition, because an <code class="docutils literal"><span class="pre">Artist</span></code> has no conception of its own semantics
within the figure, it&#8217;s difficult to interact with them in a natural
way.</p>
<p>In this sense, matplotlib will adopt a standard
Model-View-Controller (MVC) framework. The <em>Model</em> will be the user
defined data, style, and semantics. The <em>Views</em> are the ensemble of
each individual <code class="docutils literal"><span class="pre">Artist</span></code>, which are responsible for producing the
final image based on the <em>model</em>. The <em>Controller</em> will be the
<code class="docutils literal"><span class="pre">Controller</span></code> object managing its set of <code class="docutils literal"><span class="pre">Artist</span></code> objects.</p>
<p>The <code class="docutils literal"><span class="pre">Controller</span></code> must be able to export the information that it&#8217;s
carrying about the figure on command, perhaps via a <code class="docutils literal"><span class="pre">to_json</span></code> method
or similar. Because it would be extremely extraneous to duplicate all
of the information in the model with the controller, only
user-specified information (data + style) are explicitly kept. If a
user wants more information (defaults) from the view/model, it should
be able to query for it.</p>
<ul class="simple">
<li>This might be annoying to do, non-specified kwargs are pulled from
the rcParams object which is in turn created from reading a user
specified file and can be dynamically changed at run time.  I
suppose we could keep a dict of default defaults and compare against
that. Not clear how this will interact with the style sheet
[[MEP26]] - &#64;tacaswell</li>
</ul>
<p>Additional Notes:</p>
<ul class="simple">
<li>The <code class="xref py py-obj docutils literal"><span class="pre">raw</span> <span class="pre">data</span></code> does not necessarily need to be a <code class="docutils literal"><span class="pre">list</span></code>,
<code class="docutils literal"><span class="pre">ndarray</span></code>, etc. Rather, it can more abstractly just have a method
to yield data when needed.</li>
<li>Because the <code class="docutils literal"><span class="pre">Controller</span></code> will contain extra information that users
may not want to keep around, it should <em>not</em> be created by
default. You should be able to both (a) instantiate a <code class="docutils literal"><span class="pre">Controller</span></code>
with a figure and (b) build a figure with a <code class="docutils literal"><span class="pre">Controller</span></code>.</li>
</ul>
<p>Use Cases:</p>
<ul class="simple">
<li>Export all necessary informat</li>
<li>Serializing a matplotlib figure, saving it, and being able to rerun later.</li>
<li>Any other source sending an appropriately formatted representation to matplotlib to open</li>
</ul>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id5">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Here are some examples of what the controllers should be able to do.</p>
<ol class="arabic">
<li><p class="first">Instantiate a matplotlib figure from a serialized representation (e.g., JSON):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">matplotlib.controllers</span> <span class="k">import</span> <span class="n">Controller</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;my_figure&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">o</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Controller</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">figure</span>
</pre></div>
</div>
</li>
<li><p class="first">Manage artists from the controller (e.g., Line2D):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># not really sure how this should look</span>
<span class="n">c</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span>
<span class="c1"># ?</span>
</pre></div>
</div>
</li>
<li><p class="first">Export serializable figure representation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">o</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
<span class="c1"># or... we should be able to throw a figure object in there too</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">Controller</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">mpl_fig</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="implementation">
<h2><a class="toc-backref" href="#id6">Implementation</a><a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Create base <code class="docutils literal"><span class="pre">Controller</span></code> objects that are able to manage
<code class="docutils literal"><span class="pre">Artist</span></code> objects (e.g., <code class="docutils literal"><span class="pre">Hist</span></code>)</p>
<blockquote>
<div><p>Comments:</p>
<ul class="simple">
<li>initialization should happen via unpacking <code class="docutils literal"><span class="pre">**</span></code>, so we need a
copy of call signature parameter for the <code class="docutils literal"><span class="pre">Artist</span></code> we&#8217;re
ultimately trying to control. Unfortunate hard-coded
repetition...</li>
<li>should the additional <code class="docutils literal"><span class="pre">**kwargs</span></code> accepted by each <code class="docutils literal"><span class="pre">Artist</span></code>
be tracked at the <code class="docutils literal"><span class="pre">Controller</span></code></li>
<li>how does a <code class="docutils literal"><span class="pre">Controller</span></code> know which artist belongs where? E.g.,
do we need to pass <code class="docutils literal"><span class="pre">axes</span></code> references?</li>
</ul>
<p>Progress:</p>
<ul class="simple">
<li>A simple NB demonstrating some functionality for
<code class="docutils literal"><span class="pre">Line2DController</span></code> objects:
<a class="reference external" href="http://nbviewer.ipython.org/gist/theengineear/f0aa8d79f64325e767c0">http://nbviewer.ipython.org/gist/theengineear/f0aa8d79f64325e767c0</a></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Write in protocols for the <code class="docutils literal"><span class="pre">Controller</span></code> to <em>update</em> the model.</p>
<blockquote>
<div><p>Comments:</p>
<ul class="simple">
<li>how should containers be dealt with? E.g., what happens to old
patches when we re-bin a histogram?</li>
<li>in the link from (1), the old line is completely destroyed and
redrawn, what if something is referencing it?</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Create method by which a json object can be assembled from the
<code class="docutils literal"><span class="pre">Controllers</span></code></p>
</li>
<li><p class="first">Deal with serializing the unserializable aspects of a figure (e.g.,
non-affine transforms?)</p>
</li>
<li><p class="first">Be able to instantiate from a serialized representation</p>
</li>
<li><p class="first">Reimplement the existing pyplot and Axes method,
e.g. <code class="docutils literal"><span class="pre">pyplot.hist</span></code> and <code class="docutils literal"><span class="pre">Axes.hist</span></code> in terms of the new
controller class.</p>
</li>
</ol>
<p>&gt; &#64;theengineer: in #2 above, what do you mean by <em>get updates</em> from
each <code class="docutils literal"><span class="pre">Artist</span></code>?</p>
<p>^ Yup. The <code class="docutils literal"><span class="pre">Controller</span></code> <em>shouldn&#8217;t</em> need to get updated. This just
happens in #3. Delete comments when you see this.</p>
</div>
<div class="section" id="backward-compatibility">
<h2><a class="toc-backref" href="#id7">Backward compatibility</a><a class="headerlink" href="#backward-compatibility" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>pickling will change</li>
<li>non-affine transformations will require a defined pickling method</li>
</ul>
</div>
<div class="section" id="alternatives">
<h2><a class="toc-backref" href="#id8">Alternatives</a><a class="headerlink" href="#alternatives" title="Permalink to this headline">¶</a></h2>
<p>PR #3150 suggested adding semantics by parasitically attaching extra
containers to axes objects. This is a more complete solution with what
should be a more developed/flexible/powerful framework.</p>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright 2002 - 2012 John Hunter, Darren Dale, Eric Firing, Michael Droettboom and the matplotlib development team; 2012 - 2014 The matplotlib development team.
      Last updated on Sep 20, 2016.
      Created using <a
href="http://sphinx-doc.org/">Sphinx</a> 1.4.6.
    </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55954603-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
<footer>
  <!--Flipcause Integration v3.0// Flipcause Integration Instructions:
Install the following code block once in the website Header (after <head> tag) -->

<style>

.fc-black_overlay{
display:none; position: fixed; z-index:1000001; top: 0%;left: 0%;width: 100%;height: 100%;
background-color: black; filter: alpha(opacity=50); cursor:pointer; opacity:0.5;
}

.fc-white_content {
opacity:1; display:none; margin-top: -320px; margin-left: -485px; width:970px; height:640px;
position:fixed; top:50%; left:50%; border: none;z-index:1000002;overflow: auto;
}

.fc-main-box{
opacity:1; display:none; margin:15px auto 0 auto; width:930px; position:relative; z-index:1000003;
}

.fc-widget_close{
opacity:1; content:url(http://i1338.photobucket.com/albums/o691/WeCause/X_zpse4a7e538.png);
position:absolute; z-index=1000004; right:-16px; top:-16px; display:block; cursor:pointer;
}

.floating_button{
display: block; margin-top: 0px; margin-left: 0px; width:auto ; height: auto;
position:fixed; z-index:999999; overflow: auto;
}

@keyframes backfadesin {
   from { opacity:0; }
   to {opacity:.5;}
}

@-moz-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@-webkit-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@-o-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}


@-ms-keyframes backfadesin {
    from { opacity:0; }
    to {opacity:.5;}
}

@keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; transform: translateY(20px);}
   100% {opacity: 1; transform: translateY(0);}
}

@-moz-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -moz-transform: translateY(20px);}
   100% {opacity: 1; -moz-transform: translateY(0);}
}

@-webkit-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -webkit-transform: translateY(20px);}
   100% {opacity: 1; -webkit-transform: translateY(0);}
}

@-o-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -o-transform: translateY(20px);}
   100% {opacity: 1; -o-transform: translateY(0);}
}

@-ms-keyframes fadesin {
   0%{ opacity:0; }
   50%{ opacity:0; }
   75% {opacity: 0; -ms-transform: translateY(20px);}
   100% {opacity: 1; -ms-transform: translateY(0);}
}

</style>

<script>

function open_window(cause_id) {
var  protocol=String(document.location.protocol);
var new_url;
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){
new_url="https://www.flipcause.com/widget/"+cause_id
window.open(new_url);
}

else {
document.getElementById("fc-fade").style.display = "block";
document.getElementById("fc-fade").style.webkitAnimation = "backfadesin 1s";
document.getElementById("fc-fade").style.animation = "backfadesin 1s";
document.getElementById("fc-fade").style.mozAnimation = "backfadesin 1s";
document.getElementById("fc-light").style.display = "block";
document.getElementById("fc-light").style.webkitAnimation = "fadesin 1.5s";
document.getElementById("fc-light").style.animation = "fadesin 1.5s";
document.getElementById("fc-light").style.mozAnimation = "fadesin 1.5s";
document.getElementById("fc-main").style.display = "block";
document.getElementById("fc-main").style.webkitAnimation = "fadesin 1.5s";
document.getElementById("fc-main").style.animation = "fadesin 1.5s";
document.getElementById("fc-main").style.mozAnimation = "fadesin 1.5s";
document.getElementById("fc-close").style.display = "block";
document.getElementById("fc-close").style.webkitAnimation = "fadesin 1.5s";
document.getElementById("fc-close").style.animation = "fadesin 1.5s";
document.getElementById("fc-close").style.mozAnimation = "fadesin 1.5s";
document.getElementById("fc-myFrame").style.display = "block";
document.getElementById("fc-myFrame").style.webkitAnimation = "fadesin 1.5s";
document.getElementById("fc-myFrame").style.animation = "fadesin 1.5s";
document.getElementById("fc-myFrame").style.mozAnimation = "fadesin 1.5s";
document.getElementById("fc-myFrame").src="https://www.flipcause.com/widget/"+cause_id;
}
}


function close_window() {
document.getElementById("fc-fade").style.display="none";
document.getElementById("fc-light").style.display="none";
document.getElementById("fc-main").style.display="none";
document.getElementById("fc-close").style.display="none";
document.getElementById("fc-myFrame").style.display="none";
}

</script>

<div id="fc-fade" class="fc-black_overlay" onclick="close_window()"></div>
<div id="fc-light" class="fc-white_content">
<div id="fc-main" class="fc-main-box">
<div id="fc-close" class="fc-widget_close" onclick="close_window()">
</div><iframe id="fc-myFrame" iframe height="580" width="925" style="border: 0;
border-radius:5px 5px 5px 5px; box-shadow:0 0 8px rgba(0, 0, 0, 0.5);" scrolling="no" src=""></iframe></div>
</div>

<!--END Flipcause Main Integration Code-->
</footer>
</html>